version: '3.8'

services:
  app:
    image: bansheetech/robipet:latest
    # build:
    #   context: .
    #   dockerfile: Dockerfile
    container_name: robipet
    ports:
      - "29724:8081"
    volumes:
      # Persistir la base de datos SQLite
      - sqlite_data:/var/www/html/db
      # En desarrollo, montar código para hot reload (comentar en producción)
      # - ./api:/var/www/html/api
      # - ./dist:/var/www/html
    environment:
      - APACHE_RUN_USER=www-data
      - APACHE_RUN_GROUP=www-data
      # IMPORTANTE: Cambia este valor por una clave segura única en producción
      # Debe ser una string larga (mínimo 32 caracteres), compleja e impredecible
      # Ejemplo: MiClaveSecretaRobiPet2024_NuncaLaCompartas!
      # O genera una aleatoria: openssl rand -base64 32
      - JWT_SECRET=CHANGE_THIS_IN_PRODUCTION_USE_A_SECURE_RANDOM_STRING
    restart: unless-stopped

volumes:
  sqlite_data: