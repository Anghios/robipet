import{j as e,I as a}from"./iconify.Bbb5cklZ.js";import k from"./UsersList.Dyq0XiM9.js";import{u as j}from"./useTranslation.C5VkEOeN.js";import{T as S}from"./Toast.CfBa7hzp.js";import{r as b}from"./index.CaZlGE7t.js";import{u as E}from"./useToast.BMUEhQbi.js";function C({currentSection:r,onSectionChange:s}){const{t:c}=j();return e.jsx("aside",{className:"w-full lg:w-64 bg-dark-card rounded-2xl shadow-xl border border-dark p-4 lg:p-6 h-fit",children:e.jsxs("nav",{className:"flex lg:flex-col gap-2 lg:space-y-2 overflow-x-auto lg:overflow-x-visible",children:[e.jsxs("button",{onClick:()=>s("general"),className:`flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 w-full lg:w-full text-left whitespace-nowrap lg:whitespace-normal ${r==="general"?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-md":"text-dark-primary hover:bg-dark-card-hover"}`,children:[e.jsx("span",{className:"text-lg",children:e.jsx(a,{icon:"mdi:cog",className:"w-5 h-5 text-dark-accent"})}),e.jsx("span",{children:c("config.general")})]}),e.jsxs("button",{onClick:()=>s("usuarios"),className:`flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 w-full lg:w-full text-left whitespace-nowrap lg:whitespace-normal ${r==="usuarios"?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-md":"text-dark-primary hover:bg-dark-card-hover"}`,children:[e.jsx("span",{className:"text-lg",children:e.jsx(a,{icon:"mdi:account-group",className:"w-5 h-5 text-dark-accent"})}),e.jsx("span",{children:c("config.users")})]})]})})}function T(){return e.jsxs("div",{className:"flex gap-8",children:[e.jsx("aside",{className:"w-64 bg-dark-card rounded-2xl shadow-xl border border-dark p-6 h-fit",children:e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsx("div",{className:"h-10 bg-dark-secondary rounded-lg"}),e.jsx("div",{className:"h-10 bg-dark-secondary rounded-lg"})]})}),e.jsx("div",{className:"flex-1 bg-dark-card rounded-2xl shadow-xl border border-dark p-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-dark-secondary rounded-lg w-1/3 mb-6"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-4 bg-dark-secondary rounded w-full"}),e.jsx("div",{className:"h-4 bg-dark-secondary rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-dark-secondary rounded w-1/2"})]})]})})]})}function w({icon:r,title:s}){return e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx(a,{icon:r,className:"w-8 h-8 text-dark-accent"}),e.jsx("h2",{className:"text-3xl font-bold text-dark-primary",children:s})]})}function $(){const[r,s]=b.useState("general");return b.useEffect(()=>{const n=new URLSearchParams(window.location.search).get("section")||"general";s(n);const g=()=>{const d=new URLSearchParams(window.location.search).get("section")||"general";s(d)};return window.addEventListener("popstate",g),()=>{window.removeEventListener("popstate",g)}},[]),{currentSection:r,handleSectionChange:m=>{const n=new URL(window.location.href);n.searchParams.set("section",m),window.history.pushState({},"",n),s(m)}}}function I(){const{t:r,locale:s,changeLanguage:c,loading:m}=j(),{currentSection:n,handleSectionChange:g}=$(),{toast:f,showToast:d,hideToast:v}=E(),N=()=>n==="general"?e.jsxs("div",{className:"p-4 lg:p-8 space-y-6 lg:space-y-8",children:[e.jsx(w,{icon:"mdi:cog",title:r("config.general")}),e.jsxs("div",{className:"bg-gradient-card rounded-2xl shadow-xl border border-dark-hover p-4 lg:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 lg:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl",children:e.jsx(a,{icon:"mdi:database",className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-dark-primary",children:r("config.database.title")}),e.jsx("p",{className:"text-dark-secondary text-sm",children:r("config.database.description")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:async()=>{try{const o=localStorage.getItem("user");if(!o){d(r("config.database.exportError")+": No authenticated user","error");return}const x=JSON.parse(o),l=await fetch(`/api/export_database?userId=${x.id}`,{method:"GET",headers:{Accept:"application/octet-stream"}});if(!l.ok){const i=l.headers.get("content-type");if(i&&i.includes("application/json")){const u=await l.json();throw new Error(u.error||"Error al exportar")}throw new Error(`Error HTTP: ${l.status}`)}const p=await l.blob(),h=window.URL.createObjectURL(p),t=document.createElement("a");t.href=h,t.download=`database_backup_${new Date().toISOString().split("T")[0]}.sqlite`,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(h),document.body.removeChild(t),d(r("config.database.exportSuccess"),"success")}catch(o){console.error("Error exportando base de datos:",o);const x=o instanceof Error?o.message:"Unknown error";d(`${r("config.database.exportError")}: ${x}`,"error")}},className:"group flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white rounded-xl transition-all duration-300 shadow-lg hover:shadow-2xl hover:scale-105 active:scale-100",children:[e.jsx(a,{icon:"mdi:download",className:"w-6 h-6 group-hover:animate-pulse"}),e.jsx("span",{className:"font-semibold",children:r("config.database.exportButton")})]}),e.jsxs("button",{onClick:()=>{const o=document.createElement("input");o.type="file",o.accept=".sqlite",o.onchange=async x=>{const l=x.target.files?.[0];if(!l)return;const p=localStorage.getItem("authToken");if(!p){d(r("config.database.importError")+": No authenticated","error");return}const h=new FormData;h.append("database",l);try{const t=await fetch("/api/import_database",{method:"POST",headers:{Authorization:`Bearer ${p}`},body:h});if(t.ok){d(r("config.database.importSuccess"),"success"),setTimeout(()=>{window.location.reload()},2e3);return}const i=t.headers.get("content-type");let u=`Error HTTP: ${t.status}`;if(i&&i.includes("application/json"))try{u=(await t.json()).error||u}catch{}throw new Error(u)}catch(t){console.error("Error importando base de datos:",t);const i=t instanceof Error?t.message:"Unknown error";d(`${r("config.database.importError")}: ${i}`,"error")}},o.click()},className:"group flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white rounded-xl transition-all duration-300 shadow-lg hover:shadow-2xl hover:scale-105 active:scale-100",children:[e.jsx(a,{icon:"mdi:upload",className:"w-6 h-6 group-hover:animate-pulse"}),e.jsx("span",{className:"font-semibold",children:r("config.database.importButton")})]})]}),e.jsx("div",{className:"bg-amber-900/20 border border-amber-600/30 rounded-xl p-4 mt-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(a,{icon:"mdi:alert",className:"w-5 h-5 text-amber-400 mt-0.5"}),e.jsx("div",{children:e.jsx("p",{className:"font-medium text-amber-300 text-sm",children:r("config.database.importWarning")})})]})})]}),e.jsxs("div",{className:"bg-gradient-card rounded-2xl shadow-xl border border-dark-hover p-4 lg:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 lg:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-xl",children:e.jsx(a,{icon:"mdi:translate",className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-dark-primary",children:r("config.language.title")}),e.jsx("p",{className:"text-dark-secondary text-sm",children:r("config.language.description")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("button",{onClick:()=>{c("en"),window.dispatchEvent(new Event("localeChanged")),setTimeout(()=>window.location.reload(),100)},className:`group flex items-center gap-4 px-6 py-4 rounded-2xl border-2 transition-all duration-200 font-medium hover:shadow-lg ${s==="en"?"border-blue-500 bg-blue-900/20 ring-2 ring-blue-500/30 shadow-lg":"border-dark-hover bg-dark-secondary hover:border-blue-400/50 hover:bg-dark-card"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(a,{icon:"flag:us-4x3",className:"w-8 h-8 rounded-lg shadow-md"}),s==="en"&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(a,{icon:"mdi:check",className:"w-3 h-3 text-white"})})]}),e.jsx("div",{className:"text-left flex-1",children:e.jsx("div",{className:"font-bold text-dark-primary text-lg",children:r("config.language.english")})}),e.jsx(a,{icon:"mdi:chevron-right",className:`w-5 h-5 transition-transform duration-200 ${s==="en"?"text-blue-400":"text-dark-secondary group-hover:text-dark-accent"}`})]}),e.jsxs("button",{onClick:()=>{c("es"),window.dispatchEvent(new Event("localeChanged")),setTimeout(()=>window.location.reload(),100)},className:`group flex items-center gap-4 px-6 py-4 rounded-2xl border-2 transition-all duration-200 font-medium hover:shadow-lg ${s==="es"?"border-blue-500 bg-blue-900/20 ring-2 ring-blue-500/30 shadow-lg":"border-dark-hover bg-dark-secondary hover:border-blue-400/50 hover:bg-dark-card"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(a,{icon:"flag:es-4x3",className:"w-8 h-8 rounded-lg shadow-md"}),s==="es"&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(a,{icon:"mdi:check",className:"w-3 h-3 text-white"})})]}),e.jsx("div",{className:"text-left flex-1",children:e.jsx("div",{className:"font-bold text-dark-primary text-lg",children:r("config.language.spanish")})}),e.jsx(a,{icon:"mdi:chevron-right",className:`w-5 h-5 transition-transform duration-200 ${s==="es"?"text-blue-400":"text-dark-secondary group-hover:text-dark-accent"}`})]})]}),e.jsx("div",{className:"bg-blue-900/20 border border-blue-600/30 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(a,{icon:"mdi:information",className:"w-5 h-5 text-blue-400 mt-0.5"}),e.jsx("div",{children:e.jsx("p",{className:"font-medium text-blue-300 text-sm",children:r("config.language.reloadMessage")})})]})})]})]}),e.jsxs("div",{className:"bg-gradient-card rounded-2xl shadow-xl border border-dark-hover p-4 lg:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 lg:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl",children:e.jsx(a,{icon:"mdi:currency-usd",className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-dark-primary",children:r("config.currency.title")}),e.jsx("p",{className:"text-dark-secondary text-sm",children:r("config.currency.description")})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full pl-12 pr-4 py-3 border border-dark-hover rounded-xl bg-dark-card text-dark-primary focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 appearance-none cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",defaultValue:"eur",disabled:!0,children:[e.jsx("option",{value:"eur",children:r("config.currency.eur")}),e.jsx("option",{value:"usd",children:r("config.currency.usd")})]}),e.jsx(a,{icon:"mdi:chevron-down",className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary pointer-events-none"}),e.jsx(a,{icon:"mdi:currency-eur",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary"})]})]}),e.jsxs("div",{className:"bg-gradient-card rounded-2xl shadow-xl border border-dark-hover p-4 lg:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 lg:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl",children:e.jsx(a,{icon:"mdi:calendar",className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-dark-primary",children:r("config.dateFormat.title")}),e.jsx("p",{className:"text-dark-secondary text-sm",children:r("config.dateFormat.description")})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full pl-12 pr-4 py-3 border border-dark-hover rounded-xl bg-dark-card text-dark-primary focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 appearance-none cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",defaultValue:"dmySlash",disabled:!0,children:[e.jsx("option",{value:"dmySlash",children:r("config.dateFormat.dmySlash")}),e.jsx("option",{value:"mdySlash",children:r("config.dateFormat.mdySlash")}),e.jsx("option",{value:"ymdDash",children:r("config.dateFormat.ymdDash")}),e.jsx("option",{value:"dmyDot",children:r("config.dateFormat.dmyDot")})]}),e.jsx(a,{icon:"mdi:chevron-down",className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary pointer-events-none"}),e.jsx(a,{icon:"mdi:calendar-outline",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary"})]})]})]}):n==="usuarios"?e.jsxs("div",{className:"p-4 lg:p-8 space-y-6 lg:space-y-8",children:[e.jsx(w,{icon:"mdi:account-group",title:r("config.users")}),e.jsx(k,{})]}):e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-primary mb-6",children:r("config.errors.sectionNotFound")}),e.jsx("div",{className:"p-4 bg-yellow-900 rounded-lg",children:e.jsx("p",{className:"text-yellow-200",children:r("config.errors.debugMessage",{section:n})})})]});return m?e.jsx(T,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx(C,{currentSection:n,onSectionChange:g}),e.jsx("div",{className:"flex-1 bg-dark-card rounded-2xl shadow-xl border border-dark overflow-hidden",children:N()})]}),f&&e.jsx(S,{toast:f,onClose:v,duration:5e3})]})}export{I as default};
