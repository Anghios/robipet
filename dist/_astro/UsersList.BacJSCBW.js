import{u as U,j as e,I as s}from"./useTranslation.Bj4lSKMn.js";import{r as g,R as D}from"./index.CaZlGE7t.js";import{u as R}from"./useToast.BMUEhQbi.js";function _(){const[a,o]=g.useState([]),[c,t]=g.useState(!0),[d,r]=g.useState(null),[n,m]=g.useState(""),[u,h]=g.useState({name:"",email:"",username:"",password:"",role:"user"}),[w,v]=g.useState(null),[f,y]=g.useState({name:"",email:"",username:"",password:"",role:"user"}),[j,C]=g.useState(null),[S,L]=g.useState(!1),[M,E]=g.useState(!1),{toast:T,showToast:b,hideToast:p}=R();g.useEffect(()=>{N()},[]);const N=async()=>{console.log("🔍 UsersList: Iniciando fetchUsers...");try{t(!0),console.log("🔍 UsersList: Haciendo fetch a http://localhost:8081/users");const l=await fetch("http://localhost:8081/api/users");if(console.log("🔍 UsersList: Response status:",l.status),!l.ok)throw new Error("Error al cargar usuarios");const x=await l.json();console.log("🔍 UsersList: Datos recibidos:",x);const i=x.sort((k,z)=>new Date(k.created_at).getTime()-new Date(z.created_at).getTime());o(i)}catch(l){console.error("🔍 UsersList: Error en fetchUsers:",l),r(l instanceof Error?l.message:"Error desconocido")}finally{t(!1)}},F=async()=>{if(!n.trim()){N();return}try{t(!0);const l=await fetch(`http://localhost:8081/api/users/search?q=${encodeURIComponent(n)}`);if(!l.ok)throw new Error("Error en la búsqueda");const x=await l.json();o(x)}catch(l){r(l instanceof Error?l.message:"Error en la búsqueda")}finally{t(!1)}},B=async l=>{if(l.preventDefault(),!u.name.trim()||!u.username.trim()||!u.password.trim()){r("Nombre, username y contraseña son requeridos");return}try{const i=await(await fetch("http://localhost:8081/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).json();i.success?(h({name:"",email:"",username:"",password:"",role:"user"}),N(),r(null),b("Usuario creado correctamente","success"),setTimeout(()=>p(),3e3)):(r(i.message),b(i.message,"error"),setTimeout(()=>p(),3e3))}catch(x){const i=x instanceof Error?x.message:"Error al crear usuario";r(i),b(i,"error"),setTimeout(()=>p(),3e3)}},q=l=>{v(l),y({name:l.name,email:l.email||"",username:l.username,password:"",role:l.role})},I=async l=>{if(l.preventDefault(),!w||!f.name.trim()||!f.username.trim()){r("Nombre y username son requeridos");return}E(!0);try{const x={name:f.name,email:f.email,username:f.username,role:f.role,...f.password.trim()&&{password:f.password}},k=await(await fetch(`http://localhost:8081/api/users/${w.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).json();k.success?(v(null),y({name:"",email:"",username:"",password:"",role:"user"}),N(),r(null),b("Usuario actualizado correctamente","success"),setTimeout(()=>p(),3e3)):(r(k.message),b(k.message,"error"),setTimeout(()=>p(),3e3))}catch(x){const i=x instanceof Error?x.message:"Error al actualizar usuario";r(i),b(i,"error"),setTimeout(()=>p(),3e3)}finally{E(!1)}},P=async()=>{if(!j)return;const l=j.username;try{const i=await(await fetch(`http://localhost:8081/api/users/${j.userId}`,{method:"DELETE"})).json();i.success?(C(null),r(null),N(),b(`Usuario "${l}" eliminado correctamente`,"success"),setTimeout(()=>p(),3e3)):(r(i.message),b(i.message,"error"),setTimeout(()=>p(),3e3))}catch(x){const i=x instanceof Error?x.message:"Error al eliminar usuario";r(i),b(i,"error"),setTimeout(()=>p(),3e3)}},$=()=>r(null),X=()=>{v(null),y({name:"",email:"",username:"",password:"",role:"user"})};return{users:a.filter(l=>l.name.toLowerCase().includes(n.toLowerCase())||l.username.toLowerCase().includes(n.toLowerCase())||l.email&&l.email.toLowerCase().includes(n.toLowerCase())),loading:c,error:d,searchQuery:n,newUser:u,editingUser:w,editForm:f,deleteConfirm:j,showCreateForm:S,toast:T,isUpdating:M,setSearchQuery:m,setNewUser:h,setEditForm:y,setDeleteConfirm:C,setShowCreateForm:L,hideToast:p,handleSearch:F,handleCreateUser:B,handleEditUser:q,handleUpdateUser:I,handleDeleteUser:P,clearError:$,closeEditModal:X}}function A({user:a,onEdit:o,onDeleteConfirm:c}){const{t,locale:d}=U(),r=()=>{if(!document.getElementById("shake-animation")){const u=document.createElement("style");u.id="shake-animation",u.textContent=`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
          20%, 40%, 60%, 80% { transform: translateX(2px); }
        }
        .shake-on-hover:hover {
          animation: shake 0.5s ease-in-out;
        }
      `,document.head.appendChild(u)}},n=()=>{c({userId:a.id,username:a.username})};return D.useEffect(()=>{r()},[]),e.jsxs("div",{className:"bg-gradient-card border border-dark-hover rounded-2xl p-4 lg:p-8 shadow-lg hover:shadow-xl transition-all duration-200 hover:border-blue-500/30",children:[e.jsx("div",{className:"flex items-start justify-between mb-4 lg:mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 lg:w-16 lg:h-16 rounded-xl ${a.role==="admin"?"bg-purple-900/20 border border-purple-600/30":"bg-blue-900/20 border border-blue-600/30"}`,children:e.jsx(s,{icon:a.role==="admin"?"mdi:crown":"mdi:account",className:`w-6 h-6 lg:w-8 lg:h-8 ${a.role==="admin"?"text-purple-400":"text-blue-400"}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-dark-primary text-lg lg:text-xl mb-2",children:a.name}),e.jsx("span",{className:`px-3 lg:px-4 py-1 lg:py-2 text-xs lg:text-sm rounded-full font-medium ${a.role==="admin"?"bg-purple-900/40 text-purple-300 border border-purple-600/30":"bg-blue-900/40 text-blue-300 border border-blue-600/30"}`,children:a.role==="admin"?t("config.userCard.admin"):t("config.userCard.user")})]})]})}),e.jsxs("div",{className:"space-y-3 lg:space-y-4 mb-4 lg:mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 lg:gap-3 text-dark-secondary text-sm lg:text-base",children:[e.jsx(s,{icon:"mdi:at",className:"w-4 h-4 lg:w-5 lg:h-5 text-dark-accent"}),e.jsx("span",{className:"font-medium",children:t("config.userCard.username")}),e.jsx("span",{children:a.username})]}),a.email&&e.jsxs("div",{className:"flex items-center gap-2 lg:gap-3 text-dark-secondary text-sm lg:text-base",children:[e.jsx(s,{icon:"mdi:email",className:"w-4 h-4 lg:w-5 lg:h-5 text-dark-accent"}),e.jsx("span",{className:"font-medium",children:t("config.userCard.email")}),e.jsx("span",{className:"truncate",children:a.email})]}),e.jsxs("div",{className:"flex items-center gap-2 lg:gap-3 text-dark-secondary text-xs lg:text-sm",children:[e.jsx(s,{icon:"mdi:calendar",className:"w-4 h-4 lg:w-5 lg:h-5 text-dark-accent"}),e.jsx("span",{className:"font-medium",children:t("config.userCard.created")}),e.jsx("span",{children:new Date(a.created_at).toLocaleDateString(d==="es"?"es-ES":"en-US")})]})]}),e.jsxs("div",{className:"flex gap-2 lg:gap-3",children:[e.jsxs("button",{onClick:()=>o(a),className:"flex-1 px-4 lg:px-6 py-2 lg:py-3 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white text-sm lg:text-base rounded-xl font-semibold transition-all duration-200 flex items-center justify-center gap-1 lg:gap-2 shadow-md hover:shadow-lg",children:[e.jsx(s,{icon:"mdi:pencil",className:"w-4 h-4 lg:w-5 lg:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:t("config.userCard.editButton")})]}),e.jsxs("button",{"data-user-delete":a.id,onClick:n,className:"flex-1 px-4 lg:px-6 py-2 lg:py-3 bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white text-sm lg:text-base rounded-xl font-semibold transition-all duration-200 flex items-center justify-center gap-1 lg:gap-2 shadow-md hover:shadow-lg shake-on-hover",children:[e.jsx(s,{icon:"mdi:delete",className:"w-4 h-4 lg:w-5 lg:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:t("config.userCard.deleteButton")})]})]})]})}function O({editingUser:a,editForm:o,isUpdating:c=!1,onFormChange:t,onSubmit:d,onClose:r}){const{t:n}=U();return e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-card rounded-2xl shadow-2xl border border-dark-hover p-8 w-full max-w-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-dark rounded-xl",children:e.jsx(s,{icon:"mdi:pencil",className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-dark-primary",children:n("config.editUserModal.title")}),e.jsx("p",{className:"text-dark-secondary text-sm",children:a.name})]})]}),e.jsxs("form",{onSubmit:d,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-dark-primary flex items-center gap-2",children:[e.jsx(s,{icon:"mdi:account",className:"w-4 h-4 text-dark-accent"}),n("config.editUserModal.nameLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:n("config.editUserModal.namePlaceholder"),value:o.name,onChange:m=>t({...o,name:m.target.value}),required:!0,disabled:c,className:"w-full pl-12 pr-4 py-3 border border-dark-hover rounded-xl bg-dark-card text-dark-primary placeholder:text-dark-secondary focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx(s,{icon:"mdi:account-outline",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-dark-primary flex items-center gap-2",children:[e.jsx(s,{icon:"mdi:at",className:"w-4 h-4 text-dark-accent"}),n("config.editUserModal.usernameLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:n("config.editUserModal.usernamePlaceholder"),value:o.username,onChange:m=>t({...o,username:m.target.value}),required:!0,disabled:c,className:"w-full pl-12 pr-4 py-3 border border-dark-hover rounded-xl bg-dark-card text-dark-primary placeholder:text-dark-secondary focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx(s,{icon:"mdi:account-circle-outline",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-dark-primary flex items-center gap-2",children:[e.jsx(s,{icon:"mdi:email",className:"w-4 h-4 text-dark-accent"}),n("config.editUserModal.emailLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",placeholder:n("config.editUserModal.emailPlaceholder"),value:o.email,onChange:m=>t({...o,email:m.target.value}),disabled:c,className:"w-full pl-12 pr-4 py-3 border border-dark-hover rounded-xl bg-dark-card text-dark-primary placeholder:text-dark-secondary focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx(s,{icon:"mdi:email-outline",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-dark-primary flex items-center gap-2",children:[e.jsx(s,{icon:"mdi:lock",className:"w-4 h-4 text-dark-accent"}),n("config.editUserModal.passwordLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"password",placeholder:n("config.editUserModal.passwordPlaceholder"),value:o.password,onChange:m=>t({...o,password:m.target.value}),disabled:c,className:"w-full pl-12 pr-4 py-3 border border-dark-hover rounded-xl bg-dark-card text-dark-primary placeholder:text-dark-secondary focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx(s,{icon:"mdi:lock-outline",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-dark-primary flex items-center gap-2",children:[e.jsx(s,{icon:"mdi:shield-account",className:"w-4 h-4 text-dark-accent"}),n("config.editUserModal.roleLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:o.role,onChange:m=>t({...o,role:m.target.value}),disabled:c,className:"w-full pl-12 pr-4 py-3 border border-dark-hover rounded-xl bg-dark-card text-dark-primary focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 appearance-none cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"user",children:n("config.editUserModal.roleUser")}),e.jsx("option",{value:"admin",children:n("config.editUserModal.roleAdmin")})]}),e.jsx(s,{icon:"mdi:chevron-down",className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary pointer-events-none"}),e.jsx(s,{icon:"mdi:shield-outline",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:c,className:"flex-1 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white py-3 px-6 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:c?e.jsxs(e.Fragment,{children:[e.jsx(s,{icon:"mdi:loading",className:"w-5 h-5 animate-spin"}),n("config.editUserModal.saving")]}):e.jsxs(e.Fragment,{children:[e.jsx(s,{icon:"mdi:content-save",className:"w-5 h-5"}),n("config.editUserModal.saveButton")]})}),e.jsxs("button",{type:"button",onClick:r,disabled:c,className:"flex-1 bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white py-3 px-6 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(s,{icon:"mdi:close",className:"w-5 h-5"}),n("config.editUserModal.cancelButton")]})]})]})]})})}function J({deleteConfirm:a,onConfirm:o,onCancel:c}){const{t}=U(),[d,r]=g.useState(!1),n=()=>{if(!document.getElementById("shake-animation-modal")){const h=document.createElement("style");h.id="shake-animation-modal",h.textContent=`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
          20%, 40%, 60%, 80% { transform: translateX(2px); }
        }
        .shake-on-hover:hover {
          animation: shake 0.5s ease-in-out;
        }
      `,document.head.appendChild(h)}},m=async()=>{r(!0);try{await o()}finally{r(!1)}};return D.useEffect(()=>{n()},[]),e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-card rounded-2xl shadow-2xl border border-red-600/30 p-8 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-600/20 rounded-xl border border-red-600/30",children:e.jsx(s,{icon:"mdi:alert",className:"w-6 h-6 text-red-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-dark-primary",children:t("config.deleteUserModal.title")}),e.jsx("p",{className:"text-dark-secondary text-sm",children:t("config.deleteUserModal.subtitle")})]})]}),e.jsxs("div",{className:"mb-6 p-4 bg-red-900/20 rounded-xl border border-red-600/30",children:[e.jsx("p",{className:"text-dark-primary text-center",children:t("config.deleteUserModal.message",{username:a.username})}),e.jsx("p",{className:"text-dark-secondary text-sm text-center mt-2",children:t("config.deleteUserModal.warning")})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:c,disabled:d,className:"flex-1 bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white py-3 px-6 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(s,{icon:"mdi:close",className:"w-5 h-5"}),t("config.deleteUserModal.cancelButton")]}),e.jsx("button",{"data-delete-confirm":!0,onClick:m,disabled:d,className:"flex-1 bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white py-3 px-6 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed shake-on-hover",children:d?e.jsxs(e.Fragment,{children:[e.jsx(s,{icon:"mdi:loading",className:"w-5 h-5 animate-spin"}),t("config.deleteUserModal.deleting")]}):e.jsxs(e.Fragment,{children:[e.jsx(s,{icon:"mdi:delete",className:"w-5 h-5"}),t("config.deleteUserModal.deleteButton")]})})]})]})})}function Q(){return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6",children:[e.jsx("div",{className:"h-6 bg-dark-card rounded w-32 mb-4 animate-pulse"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1 h-10 bg-dark-card rounded animate-pulse"}),e.jsx("div",{className:"h-10 w-20 bg-dark-card rounded animate-pulse"}),e.jsx("div",{className:"h-10 w-28 bg-dark-card rounded animate-pulse"})]})]}),e.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6",children:[e.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded w-40 mb-4 animate-pulse"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1 h-10 bg-dark-card rounded animate-pulse"}),e.jsx("div",{className:"flex-1 h-10 bg-dark-card rounded animate-pulse"}),e.jsx("div",{className:"h-10 w-32 bg-gray-300 dark:bg-gray-600 rounded animate-pulse"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-6 bg-dark-card rounded w-36 mb-4 animate-pulse"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((a,o)=>e.jsxs("div",{className:"bg-dark-card border border-dark rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:"h-5 bg-dark-secondary rounded w-24 animate-pulse"}),e.jsx("div",{className:"h-5 bg-dark-secondary rounded w-16 animate-pulse"})]}),e.jsx("div",{className:"h-4 bg-dark-secondary rounded w-32 mb-2 animate-pulse"}),e.jsx("div",{className:"h-3 bg-dark-secondary rounded w-20 animate-pulse"})]},o))})]})]})}function W({newUser:a,onUserChange:o,onSubmit:c,onCancel:t}){const{t:d}=U();return e.jsxs("div",{className:"bg-gradient-card rounded-2xl shadow-xl border border-dark-hover p-8 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-dark rounded-xl",children:e.jsx(s,{icon:"mdi:account-plus",className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-dark-primary",children:d("config.createUserForm.title")}),e.jsx("p",{className:"text-dark-secondary text-sm",children:d("config.createUserForm.subtitle")})]})]}),e.jsxs("form",{onSubmit:c,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-dark-primary flex items-center gap-2",children:[e.jsx(s,{icon:"mdi:account",className:"w-4 h-4 text-dark-accent"}),d("config.createUserForm.nameLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:d("config.createUserForm.namePlaceholder"),value:a.name,onChange:r=>o({...a,name:r.target.value}),required:!0,className:"w-full pl-12 pr-4 py-3 border border-dark-hover rounded-xl bg-dark-card text-dark-primary placeholder:text-dark-secondary focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"}),e.jsx(s,{icon:"mdi:account-outline",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-dark-primary flex items-center gap-2",children:[e.jsx(s,{icon:"mdi:at",className:"w-4 h-4 text-dark-accent"}),d("config.createUserForm.usernameLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:d("config.createUserForm.usernamePlaceholder"),value:a.username,onChange:r=>o({...a,username:r.target.value}),required:!0,className:"w-full pl-12 pr-4 py-3 border border-dark-hover rounded-xl bg-dark-card text-dark-primary placeholder:text-dark-secondary focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"}),e.jsx(s,{icon:"mdi:account-circle-outline",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-dark-primary flex items-center gap-2",children:[e.jsx(s,{icon:"mdi:email",className:"w-4 h-4 text-dark-accent"}),d("config.createUserForm.emailLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",placeholder:d("config.createUserForm.emailPlaceholder"),value:a.email,onChange:r=>o({...a,email:r.target.value}),className:"w-full pl-12 pr-4 py-3 border border-dark-hover rounded-xl bg-dark-card text-dark-primary placeholder:text-dark-secondary focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"}),e.jsx(s,{icon:"mdi:email-outline",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-dark-primary flex items-center gap-2",children:[e.jsx(s,{icon:"mdi:lock",className:"w-4 h-4 text-dark-accent"}),d("config.createUserForm.passwordLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"password",placeholder:d("config.createUserForm.passwordPlaceholder"),value:a.password,onChange:r=>o({...a,password:r.target.value}),required:!0,className:"w-full pl-12 pr-4 py-3 border border-dark-hover rounded-xl bg-dark-card text-dark-primary placeholder:text-dark-secondary focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"}),e.jsx(s,{icon:"mdi:lock-outline",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-dark-primary flex items-center gap-2",children:[e.jsx(s,{icon:"mdi:shield-account",className:"w-4 h-4 text-dark-accent"}),d("config.createUserForm.roleLabel")]}),e.jsxs("div",{className:"relative max-w-xs",children:[e.jsxs("select",{value:a.role,onChange:r=>o({...a,role:r.target.value}),className:"w-full pl-12 pr-4 py-3 border border-dark-hover rounded-xl bg-dark-card text-dark-primary focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 appearance-none cursor-pointer",children:[e.jsx("option",{value:"user",children:d("config.createUserForm.roleUser")}),e.jsx("option",{value:"admin",children:d("config.createUserForm.roleAdmin")})]}),e.jsx(s,{icon:"mdi:chevron-down",className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary pointer-events-none"}),e.jsx(s,{icon:"mdi:shield-outline",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-dark-secondary"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs("button",{type:"button",onClick:t,className:"px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:[e.jsx(s,{icon:"mdi:close",className:"w-5 h-5"}),d("config.createUserForm.cancelButton")]}),e.jsxs("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:[e.jsx(s,{icon:"mdi:plus",className:"w-5 h-5"}),d("config.createUserForm.createButton")]})]})]})]})}function Y(){const{t:a}=U(),{users:o,loading:c,error:t,newUser:d,editingUser:r,editForm:n,deleteConfirm:m,showCreateForm:u,toast:h,isUpdating:w,setNewUser:v,setEditForm:f,setDeleteConfirm:y,setShowCreateForm:j,hideToast:C,handleCreateUser:S,handleEditUser:L,handleUpdateUser:M,handleDeleteUser:E,clearError:T,closeEditModal:b}=_();return c?e.jsx(Q,{}):e.jsxs("div",{className:"p-4 lg:p-6 space-y-6 lg:space-y-8",children:[t&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center justify-between",children:[e.jsx("span",{children:t}),e.jsx("button",{type:"button",onClick:T,className:"ml-2 text-red-400 hover:text-red-300",children:e.jsx(s,{icon:"mdi:close",className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 lg:mb-8 gap-4",children:e.jsxs("button",{onClick:()=>j(!u),className:`flex items-center gap-3 px-4 lg:px-6 py-2 lg:py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl text-sm lg:text-base ${u?"bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white"}`,children:[e.jsx(s,{icon:u?"mdi:close":"mdi:account-plus",className:"w-5 h-5"}),a(u?"config.usersList.cancelButton":"config.usersList.newUserButton")]})}),u&&e.jsx(W,{newUser:d,onUserChange:v,onSubmit:S,onCancel:()=>j(!1)}),e.jsx("div",{children:o.length===0?e.jsxs("div",{className:"text-center py-12 bg-dark-card rounded-2xl border border-dark-hover",children:[e.jsx(s,{icon:"mdi:account-off",className:"w-16 h-16 text-dark-secondary mx-auto mb-4"}),e.jsx("p",{className:"text-dark-secondary text-lg",children:a("config.usersList.emptyState.title")}),e.jsx("p",{className:"text-dark-secondary text-sm mt-2",children:a(u?"config.usersList.emptyState.subtitleWithForm":"config.usersList.emptyState.subtitleWithoutForm")})]}):e.jsx("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 lg:grid-cols-2",children:o.map(p=>e.jsx(A,{user:p,onEdit:L,onDeleteConfirm:y},p.id))})}),r&&e.jsx(O,{editingUser:r,editForm:n,isUpdating:w,onFormChange:f,onSubmit:M,onClose:b}),m&&e.jsx(J,{deleteConfirm:m,onConfirm:E,onCancel:()=>y(null)}),h&&e.jsx("div",{className:"fixed top-4 right-4 z-[60] animate-in slide-in-from-right duration-300",children:e.jsxs("div",{className:`flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl border backdrop-blur-sm ${h.type==="success"?"bg-green-900/80 border-green-600/30 text-green-100":h.type==="error"?"bg-red-900/80 border-red-600/30 text-red-100":"bg-yellow-900/80 border-yellow-600/30 text-yellow-100"}`,children:[e.jsx(s,{icon:h.type==="success"?"mdi:check-circle":h.type==="error"?"mdi:alert-circle":"mdi:alert",className:`w-6 h-6 ${h.type==="success"?"text-green-400":h.type==="error"?"text-red-400":"text-yellow-400"}`}),e.jsx("span",{className:"font-medium",children:h.message}),e.jsx("button",{onClick:C,className:"ml-2 hover:opacity-70 transition-opacity",children:e.jsx(s,{icon:"mdi:close",className:"w-5 h-5"})})]})})]})}export{Y as default};
