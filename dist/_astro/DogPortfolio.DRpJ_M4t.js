import{u as E,j as e,I as l}from"./useTranslation.Bj4lSKMn.js";import{r as p}from"./index.CaZlGE7t.js";import{T as ht}from"./Toast.C4bjx4XO.js";import{u as xt}from"./useToast.BMUEhQbi.js";/* empty css                       */function Q({isOpen:t,onClose:r,onConfirm:s,title:c,message:n,confirmText:m,confirmColor:a,icon:d}){const{t:o}=E();return p.useEffect(()=>{if(!document.getElementById("shake-animation")){const h=document.createElement("style");h.id="shake-animation",h.textContent=`
        @keyframes shake {
          0%, 100% { transform: translateX(0) rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px) rotate(-1deg); }
          20%, 40%, 60%, 80% { transform: translateX(2px) rotate(1deg); }
        }
      `,document.head.appendChild(h)}},[]),t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-slate-800 rounded-2xl border border-slate-700 shadow-2xl max-w-md w-full animate-in fade-in zoom-in duration-200",children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:e.jsx(l,{icon:d,className:"w-16 h-16 mx-auto"})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:c}),e.jsx("p",{className:"text-slate-300 mb-6 leading-relaxed",children:n}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:r,className:"flex-1 px-4 py-3 bg-slate-600 text-white font-semibold rounded-xl hover:bg-slate-500 transition-all focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 focus:ring-offset-slate-800 inline-flex items-center justify-center gap-2",children:[e.jsx(l,{icon:"mdi:close",className:"w-5 h-5"}),o("confirmationModal.cancel")]}),e.jsxs("button",{onClick:s,className:`flex-1 px-4 py-3 text-white font-semibold rounded-xl transition-all focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 inline-flex items-center justify-center gap-2 ${a}`,onMouseEnter:h=>{(m==="Eliminar"||m===o("confirmationModal.delete")||m==="Quitar"||m==="Remove"||m==="Delete")&&(h.currentTarget.style.animation="shake 0.5s ease-in-out infinite")},onMouseLeave:h=>{h.currentTarget.style.animation="none"},children:[e.jsx(l,{icon:m==="Eliminar"||m===o("confirmationModal.delete")||m==="Quitar"||m==="Remove"||m==="Delete"?"mdi:delete":"mdi:check",className:"w-5 h-5"}),m]})]})]})})}):null}function pt(){return e.jsxs("div",{className:"min-h-screen bg-slate-900 p-6",children:[e.jsx("header",{className:"mb-8 p-8 bg-gradient-dark rounded-3xl shadow-2xl",children:e.jsxs("div",{className:"flex items-center gap-8 max-md:flex-col max-md:text-center",children:[e.jsx("div",{className:"w-32 h-32 bg-white/20 rounded-full animate-pulse flex items-center justify-center",children:e.jsx("div",{className:"w-24 h-24 bg-white/30 rounded-full animate-pulse"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-12 w-64 bg-white/20 rounded-xl mb-4 animate-pulse"}),e.jsx("div",{className:"h-6 w-48 bg-white/20 rounded-lg mb-6 animate-pulse"}),e.jsxs("div",{className:"flex gap-4 max-md:justify-center",children:[e.jsx("div",{className:"h-8 w-24 bg-white/20 rounded-full animate-pulse"}),e.jsx("div",{className:"h-8 w-32 bg-white/20 rounded-full animate-pulse"})]})]})]})}),e.jsx("nav",{className:"mb-8 p-2 bg-slate-800 rounded-2xl border border-slate-700",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"flex-1 h-12 bg-slate-700 rounded-xl animate-pulse"}),e.jsx("div",{className:"flex-1 h-12 bg-slate-800 rounded-xl animate-pulse"}),e.jsx("div",{className:"flex-1 h-12 bg-slate-800 rounded-xl animate-pulse"}),e.jsx("div",{className:"flex-1 h-12 bg-slate-800 rounded-xl animate-pulse"})]})}),e.jsxs("main",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-48 bg-slate-800 rounded-2xl animate-pulse"}),e.jsx("div",{className:"h-40 bg-slate-800 rounded-2xl animate-pulse"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-64 bg-slate-800 rounded-2xl animate-pulse"}),e.jsx("div",{className:"h-48 bg-slate-800 rounded-2xl animate-pulse"})]})]})]})}function gt({dog_info:t,formatDate:r}){const{t:s}=E();return e.jsxs("div",{className:"group bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-sm rounded-2xl shadow-lg border border-slate-700/50 p-6 hover:shadow-2xl hover:shadow-blue-500/10 hover:border-blue-400/30 hover:scale-[1.02] transition-all duration-500 ease-out cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-slate-700/50 group-hover:border-blue-400/30 transition-colors duration-300",children:[e.jsx(l,{icon:"ph:dog-fill",className:"w-6 h-6 text-blue-400 group-hover:text-blue-300 group-hover:scale-110 transition-all duration-300"}),e.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-blue-50 transition-colors duration-300",children:s("home.basicInfo.title")})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover:text-slate-200 font-medium flex items-center gap-2 transition-colors duration-200",children:[e.jsx(l,{icon:"mdi:calendar",className:"w-4 h-4 text-blue-400 group-hover/item:text-blue-300 group-hover/item:scale-110 transition-all duration-200"}),s("home.basicInfo.birthDate")]}),e.jsx("span",{className:"text-white font-semibold group-hover/item:text-blue-100 transition-colors duration-200",children:t?.birth_date?r(t.birth_date):s("common.loading")})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover:text-slate-200 font-medium flex items-center gap-2 transition-colors duration-200",children:[e.jsx(l,{icon:"mdi:medical-bag",className:"w-4 h-4 text-purple-400 group-hover/item:text-purple-300 group-hover/item:scale-110 transition-all duration-200"}),s("common.neutered")]}),e.jsxs("div",{className:`flex items-center gap-1 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${t?.neutered?"bg-green-500/20 text-green-300 group-hover/item:bg-green-500/30 group-hover/item:text-green-200":"bg-red-500/20 text-red-300 group-hover/item:bg-red-500/30 group-hover/item:text-red-200"}`,children:[e.jsx(l,{icon:t?.neutered?"mdi:check":"mdi:close",className:"w-3 h-3 group-hover/item:scale-110 transition-transform duration-200"}),t?.neutered?s("common.yes"):s("common.no")]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover:text-slate-200 font-medium flex items-center gap-2 transition-colors duration-200",children:[e.jsx(l,{icon:"mdi:clock",className:"w-4 h-4 text-orange-400 group-hover/item:text-orange-300 group-hover/item:scale-110 transition-all duration-200"}),s("home.basicInfo.age")]}),e.jsxs("span",{className:"text-white font-semibold group-hover/item:text-orange-100 transition-colors duration-200",children:[t?.age_years||0," ",s("common.years"),", ",t?.age_months||0," ",s("common.months")]})]}),t?.species==="dog"&&e.jsxs("div",{className:"flex items-center justify-between py-3 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover:text-slate-200 font-medium flex items-center gap-2 transition-colors duration-200",children:[e.jsx(l,{icon:"ph:dog-fill",className:"w-4 h-4 text-cyan-400 group-hover/item:text-cyan-300 group-hover/item:scale-110 transition-all duration-200"}),s("home.basicInfo.dogAge")]}),e.jsxs("span",{className:"text-white font-semibold group-hover/item:text-cyan-100 transition-colors duration-200",children:[t?.dog_years||0," ",s("common.years")]})]})]})]})}function ft({dog_info:t,getSizeText:r,getCurrentWeight:s}){const{t:c}=E();return e.jsxs("div",{className:"group bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-sm rounded-2xl shadow-lg border border-slate-700/50 p-6 hover:shadow-2xl hover:shadow-purple-500/10 hover:border-purple-400/30 hover:scale-[1.02] transition-all duration-500 ease-out cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-slate-700/50 group-hover:border-purple-400/30 transition-colors duration-300",children:[e.jsx(l,{icon:"fluent:data-usage-16-regular",className:"w-6 h-6 text-purple-400 group-hover:text-purple-300 group-hover:scale-110 transition-all duration-300"}),e.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-purple-50 transition-colors duration-300",children:c("home.physicalData.title")})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover:text-slate-200 font-medium flex items-center gap-2 transition-colors duration-200",children:[e.jsx(l,{icon:"mdi:dog",className:"w-4 h-4 text-emerald-400 group-hover/item:text-emerald-300 group-hover/item:scale-110 transition-all duration-200"}),c("home.basicInfo.breed")]}),e.jsx("span",{className:"text-white font-semibold group-hover/item:text-emerald-100 transition-colors duration-200",children:t?.breed||c("common.loading")})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover:text-slate-200 font-medium flex items-center gap-2 transition-colors duration-200",children:[e.jsx(l,{icon:"mdi:palette",className:"w-4 h-4 text-rose-400 group-hover/item:text-rose-300 group-hover/item:scale-110 transition-all duration-200"}),c("home.basicInfo.color")]}),e.jsx("span",{className:"text-white font-semibold group-hover/item:text-rose-100 transition-colors duration-200",children:t?.color||c("common.loading")})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover:text-slate-200 font-medium flex items-center gap-2 transition-colors duration-200",children:[e.jsx(l,{icon:"mdi:resize",className:"w-4 h-4 text-amber-400 group-hover/item:text-amber-300 group-hover/item:scale-110 transition-all duration-200"}),c("home.physicalData.size")]}),e.jsx("span",{className:"text-white font-semibold group-hover/item:text-amber-100 transition-colors duration-200",children:r(t?.size||"medium",c)})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover:text-slate-200 font-medium flex items-center gap-2 transition-colors duration-200",children:[e.jsx(l,{icon:"mdi:weight",className:"w-4 h-4 text-teal-400 group-hover/item:text-teal-300 group-hover/item:scale-110 transition-all duration-200"}),c("home.physicalData.currentWeight")]}),e.jsxs("span",{className:"text-white font-semibold group-hover/item:text-teal-100 transition-colors duration-200",children:[s()," kg"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover:text-slate-200 font-medium flex items-center gap-2 transition-colors duration-200",children:[e.jsx(l,{icon:"mdi:chip",className:"w-4 h-4 text-indigo-400 group-hover/item:text-indigo-300 group-hover/item:scale-110 transition-all duration-200"}),c("home.physicalData.microchip")]}),e.jsx("span",{className:`font-mono text-sm font-semibold px-3 py-1.5 rounded-full transition-all duration-200 ${t?.microchip&&t.microchip!==c("portfolio.physicalData.noMicrochip")?"bg-indigo-500/20 text-indigo-300 group-hover/item:bg-indigo-500/30 group-hover/item:text-indigo-200":"bg-slate-500/20 text-slate-400 group-hover/item:bg-slate-500/30 group-hover/item:text-slate-300"}`,children:t?.microchip||c("portfolio.physicalData.noMicrochip")})]})]})]})}function bt({review:t,formatDate:r,onEdit:s,onDelete:c}){const{t:n}=E();p.useEffect(()=>{if(!document.getElementById("shake-animation")){const d=document.createElement("style");d.id="shake-animation",d.textContent=`
        @keyframes shake {
          0%, 100% { transform: translateX(0) rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px) rotate(-1deg); }
          20%, 40%, 60%, 80% { transform: translateX(2px) rotate(1deg); }
        }
      `,document.head.appendChild(d)}},[]);const a=(d=>{switch(d){case"routine":return{icon:"mdi:refresh",label:n("portfolio.medicalReviews.card.visitTypeRoutine"),color:"bg-blue-500/20 text-blue-400"};case"illness":return{icon:"mdi:thermometer-alert",label:n("portfolio.medicalReviews.card.visitTypeIllness"),color:"bg-red-500/20 text-red-400"};case"emergency":return{icon:"mdi:alert",label:n("portfolio.medicalReviews.card.visitTypeEmergency"),color:"bg-orange-500/20 text-orange-400"};case"follow_up":return{icon:"mdi:clipboard-text",label:n("portfolio.medicalReviews.card.visitTypeFollowUp"),color:"bg-green-500/20 text-green-400"};default:return{icon:"mdi:clipboard-text",label:n("portfolio.medicalReviews.card.visitTypeFollowUp"),color:"bg-green-500/20 text-green-400"}}})(t.visit_type);return e.jsxs("div",{className:"group bg-gradient-to-br from-slate-800/60 to-slate-900/60 backdrop-blur-sm p-6 rounded-2xl border border-slate-700/50 shadow-lg hover:shadow-2xl hover:shadow-emerald-500/10 hover:border-emerald-400/30 hover:scale-[1.02] transition-all duration-500 ease-out cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("h4",{className:"text-xl font-bold text-white group-hover:text-emerald-50 transition-colors duration-300 mb-2",children:t.reason})}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs("span",{className:`px-3 py-1.5 rounded-full text-xs font-medium flex items-center transition-all duration-300 ${a.color} group-hover:scale-105`,children:[e.jsx(l,{icon:a.icon,className:"w-3 h-3 mr-1 group-hover:scale-110 transition-transform duration-300"}),a.label]}),t.cost&&e.jsxs("span",{className:"bg-green-500/20 text-green-300 px-3 py-1.5 rounded-full text-sm font-bold group-hover:bg-green-500/30 group-hover:text-green-200 group-hover:scale-105 transition-all duration-300",children:[t.cost,"€"]})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:calendar",className:"w-4 h-4 text-blue-400 group-hover/item:text-blue-300 group-hover/item:scale-110 transition-all duration-200"}),n("portfolio.medicalReviews.card.dateLabel")]}),e.jsx("span",{className:"text-white font-medium group-hover/item:text-emerald-100 transition-colors duration-200",children:r(t.visit_date)})]}),t.veterinarian&&e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:doctor",className:"w-4 h-4 text-teal-400 group-hover/item:text-teal-300 group-hover/item:scale-110 transition-all duration-200"}),n("portfolio.medicalReviews.card.veterinarianLabel")]}),e.jsx("span",{className:"text-white font-medium group-hover/item:text-emerald-100 transition-colors duration-200",children:t.veterinarian})]}),t.clinic_name&&e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:hospital-building",className:"w-4 h-4 text-purple-400 group-hover/item:text-purple-300 group-hover/item:scale-110 transition-all duration-200"}),n("portfolio.medicalReviews.card.clinicLabel")]}),e.jsx("span",{className:"text-white font-medium group-hover/item:text-emerald-100 transition-colors duration-200",children:t.clinic_name})]}),t.diagnosis&&e.jsxs("div",{className:"bg-slate-700/30 p-4 rounded-xl border border-slate-600/50 hover:bg-slate-700/50 hover:border-slate-500/50 transition-all duration-300 group/diag",children:[e.jsxs("span",{className:"text-slate-300 text-sm font-medium block mb-2 group-hover/diag:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:clipboard-pulse",className:"w-4 h-4 text-red-400 group-hover/diag:text-red-300 group-hover/diag:scale-110 transition-all duration-200"}),n("portfolio.medicalReviews.card.diagnosisLabel")]}),e.jsx("span",{className:"text-white text-sm group-hover/diag:text-slate-100 transition-colors duration-200",children:t.diagnosis})]}),t.treatment&&e.jsxs("div",{className:"bg-slate-700/30 p-4 rounded-xl border border-slate-600/50 hover:bg-slate-700/50 hover:border-slate-500/50 transition-all duration-300 group/treat",children:[e.jsxs("span",{className:"text-slate-300 text-sm font-medium block mb-2 group-hover/treat:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:medical-bag",className:"w-4 h-4 text-green-400 group-hover/treat:text-green-300 group-hover/treat:scale-110 transition-all duration-200"}),n("portfolio.medicalReviews.card.treatmentLabel")]}),e.jsx("span",{className:"text-white text-sm group-hover/treat:text-slate-100 transition-colors duration-200",children:t.treatment})]}),t.next_visit&&e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:calendar-clock",className:"w-4 h-4 text-yellow-400 group-hover/item:text-yellow-300 group-hover/item:scale-110 transition-all duration-200"}),n("portfolio.medicalReviews.card.nextVisitLabel")]}),e.jsx("span",{className:"text-yellow-400 font-medium group-hover/item:text-yellow-300 transition-colors duration-200",children:r(t.next_visit)})]}),t.notes&&e.jsxs("div",{className:"bg-slate-700/30 p-4 rounded-xl border border-slate-600/50 hover:bg-slate-700/50 hover:border-slate-500/50 transition-all duration-300 group/notes",children:[e.jsxs("span",{className:"text-slate-300 text-sm font-medium block mb-2 group-hover/notes:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:note-text",className:"w-4 h-4 text-amber-400 group-hover/notes:text-amber-300 group-hover/notes:scale-110 transition-all duration-200"}),n("portfolio.medicalReviews.card.notesLabel")]}),e.jsx("span",{className:"text-white text-sm italic group-hover/notes:text-slate-100 transition-colors duration-200",children:t.notes})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-700/50 group-hover:border-emerald-400/30 transition-colors duration-300",children:[e.jsxs("button",{onClick:()=>s(t),className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-blue-500/80 to-indigo-600/80 hover:from-blue-500 hover:to-indigo-600 text-white rounded-xl transition-all duration-300 text-sm font-medium inline-flex items-center justify-center shadow-lg hover:shadow-blue-500/25 hover:scale-105 hover:-translate-y-0.5 group/edit",title:n("portfolio.medicalReviews.card.editTitle"),children:[e.jsx(l,{icon:"mdi:pencil",className:"w-4 h-4 mr-2 group-hover/edit:scale-110 transition-transform duration-200"}),e.jsx("span",{className:"group-hover/edit:tracking-wide transition-all duration-200",children:n("portfolio.medicalReviews.card.editButton")})]}),e.jsx("button",{onClick:()=>c(t),className:"px-4 py-2.5 bg-gradient-to-r from-red-500/80 to-rose-600/80 hover:from-red-500 hover:to-rose-600 text-white rounded-xl transition-all duration-300 text-sm font-medium inline-flex items-center justify-center shadow-lg hover:shadow-red-500/25 hover:scale-105 hover:-translate-y-0.5 group/delete animate-none hover:animate-pulse",title:n("portfolio.medicalReviews.card.deleteTitle"),onMouseEnter:d=>{d.currentTarget.style.animation="shake 0.5s ease-in-out infinite"},onMouseLeave:d=>{d.currentTarget.style.animation="none"},children:e.jsx(l,{icon:"mdi:delete",className:"w-4 h-4 group-hover/delete:scale-125 group-hover/delete:rotate-12 transition-all duration-200"})})]})]})}function vt({formData:t,isEditing:r,isSaving:s,onFormChange:c,onSave:n,onCancel:m}){const{t:a}=E(),d=(o,h)=>{c({...t,[o]:h})};return e.jsxs("div",{className:"mb-8 p-8 bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-sm rounded-2xl border border-slate-700/50 shadow-2xl hover:shadow-purple-500/10 transition-all duration-500",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8 pb-6 border-b border-slate-700/50",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500/20 to-purple-600/20 rounded-xl border border-purple-500/30",children:e.jsx(l,{icon:"mdi:stethoscope",className:"w-8 h-8 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-white mb-1",children:a(r?"portfolio.medicalReviews.form.editTitle":"portfolio.medicalReviews.form.newTitle")}),e.jsx("p",{className:"text-slate-400 text-sm",children:a(r?"portfolio.medicalReviews.form.editSubtitle":"portfolio.medicalReviews.form.newSubtitle")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:calendar",className:"w-4 h-4 text-purple-400"}),a("portfolio.medicalReviews.form.visitDateLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:t.visit_date,onChange:o=>d("visit_date",o.target.value),required:!0,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70"}),e.jsx(l,{icon:"mdi:calendar-today",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:clipboard-pulse",className:"w-4 h-4 text-purple-400"}),a("portfolio.medicalReviews.form.visitTypeLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:t.visit_type,onChange:o=>d("visit_type",o.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70 appearance-none",children:[e.jsx("option",{value:"routine",children:a("portfolio.medicalReviews.form.visitTypeRoutine")}),e.jsx("option",{value:"illness",children:a("portfolio.medicalReviews.form.visitTypeIllness")}),e.jsx("option",{value:"emergency",children:a("portfolio.medicalReviews.form.visitTypeEmergency")}),e.jsx("option",{value:"follow_up",children:a("portfolio.medicalReviews.form.visitTypeFollowUp")})]}),e.jsx(l,{icon:"mdi:chevron-down",className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),e.jsx(l,{icon:"mdi:medical-bag",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:doctor",className:"w-4 h-4 text-purple-400"}),a("portfolio.medicalReviews.form.veterinarianLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t.veterinarian,onChange:o=>d("veterinarian",o.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70",placeholder:a("portfolio.medicalReviews.form.veterinarianPlaceholder")}),e.jsx(l,{icon:"mdi:account-tie",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:hospital-building",className:"w-4 h-4 text-purple-400"}),a("portfolio.medicalReviews.form.clinicLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t.clinic_name,onChange:o=>d("clinic_name",o.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70",placeholder:a("portfolio.medicalReviews.form.clinicPlaceholder")}),e.jsx(l,{icon:"mdi:domain",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:clipboard-text",className:"w-4 h-4 text-purple-400"}),a("portfolio.medicalReviews.form.reasonLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t.reason,onChange:o=>d("reason",o.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70",placeholder:a("portfolio.medicalReviews.form.reasonPlaceholder")}),e.jsx(l,{icon:"mdi:help-circle",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:currency-eur",className:"w-4 h-4 text-purple-400"}),a("portfolio.medicalReviews.form.costLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.01",value:t.cost,onChange:o=>d("cost",o.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70",placeholder:a("portfolio.medicalReviews.form.costPlaceholder")}),e.jsx(l,{icon:"mdi:cash",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"md:col-span-2 group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:clipboard-pulse",className:"w-4 h-4 text-purple-400"}),a("portfolio.medicalReviews.form.diagnosisLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:t.diagnosis,onChange:o=>d("diagnosis",o.target.value),rows:3,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70 resize-none",placeholder:a("portfolio.medicalReviews.form.diagnosisPlaceholder")}),e.jsx(l,{icon:"mdi:medical-bag",className:"absolute left-4 top-4 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"md:col-span-2 group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:pill",className:"w-4 h-4 text-purple-400"}),a("portfolio.medicalReviews.form.treatmentLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:t.treatment,onChange:o=>d("treatment",o.target.value),rows:3,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70 resize-none",placeholder:a("portfolio.medicalReviews.form.treatmentPlaceholder")}),e.jsx(l,{icon:"mdi:bandage",className:"absolute left-4 top-4 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:calendar-clock",className:"w-4 h-4 text-purple-400"}),a("portfolio.medicalReviews.form.nextVisitLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:t.next_visit,onChange:o=>d("next_visit",o.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70"}),e.jsx(l,{icon:"mdi:calendar-arrow-right",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]})]}),e.jsxs("div",{className:"mb-8 group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:note-text",className:"w-4 h-4 text-purple-400"}),a("portfolio.medicalReviews.form.notesLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:t.notes,onChange:o=>d("notes",o.target.value),rows:4,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70 resize-none",placeholder:a("portfolio.medicalReviews.form.notesPlaceholder")}),e.jsx(l,{icon:"mdi:pencil",className:"absolute left-4 top-4 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-700/50",children:[e.jsx("button",{onClick:n,disabled:s,className:"flex-1 px-6 py-4 bg-gradient-to-r from-blue-500/90 to-purple-600/90 hover:from-blue-500 hover:to-purple-600 text-white font-semibold rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-purple-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 hover:scale-[1.02] hover:-translate-y-0.5 group/save",children:s?e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:"mdi:loading",className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:a(r?"portfolio.medicalReviews.form.updatingText":"portfolio.medicalReviews.form.savingText")})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:"mdi:content-save",className:"w-5 h-5 group-hover/save:scale-110 transition-transform"}),e.jsx("span",{className:"group-hover/save:tracking-wide transition-all",children:a(r?"portfolio.medicalReviews.form.updateButton":"portfolio.medicalReviews.form.saveButton")})]})}),e.jsxs("button",{onClick:m,className:"px-6 py-4 bg-gradient-to-r from-slate-600/90 to-slate-700/90 hover:from-slate-600 hover:to-slate-700 text-white font-semibold rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl flex items-center gap-3 hover:scale-[1.02] hover:-translate-y-0.5 group/cancel",children:[e.jsx(l,{icon:"mdi:close",className:"w-5 h-5 group-hover/cancel:scale-110 transition-transform"}),e.jsx("span",{className:"group-hover/cancel:tracking-wide transition-all",children:a("portfolio.medicalReviews.form.cancelButton")})]})]})]})}function wt({vaccine:t,formatDate:r,onEdit:s,onComplete:c,onDelete:n,getVaccineStatusColor:m,getVaccineStatusBadge:a}){const{t:d,locale:o}=E();p.useEffect(()=>{if(!document.getElementById("shake-animation")){const j=document.createElement("style");j.id="shake-animation",j.textContent=`
        @keyframes shake {
          0%, 100% { transform: translateX(0) rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px) rotate(-1deg); }
          20%, 40%, 60%, 80% { transform: translateX(2px) rotate(1deg); }
        }
      `,document.head.appendChild(j)}},[]);const h=t.status||"pending",x=(()=>{switch(h){case"pending":return{icon:"mdi:clock-outline",label:d("portfolio.common.pending"),color:"bg-yellow-500/20 text-yellow-400"};case"completed":return{icon:"mdi:check-circle",label:d("portfolio.common.completed"),color:"bg-green-500/20 text-green-400"};case"overdue":return{icon:"mdi:alert-circle",label:d("portfolio.common.expired"),color:"bg-red-500/20 text-red-400"};default:return{icon:"mdi:clock-outline",label:d("portfolio.common.pending"),color:"bg-yellow-500/20 text-yellow-400"}}})();return e.jsxs("div",{className:"group bg-gradient-to-br from-slate-800/60 to-slate-900/60 backdrop-blur-sm p-6 rounded-2xl border border-slate-700/50 shadow-lg hover:shadow-2xl hover:shadow-emerald-500/10 hover:border-emerald-400/30 hover:scale-[1.02] transition-all duration-500 ease-out cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("h4",{className:"text-xl font-bold text-white group-hover:text-emerald-50 transition-colors duration-300 mb-2",children:t.vaccine_name})}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsxs("span",{className:`px-3 py-1.5 rounded-full text-xs font-medium flex items-center transition-all duration-300 ${x.color} group-hover:scale-105`,children:[e.jsx(l,{icon:x.icon,className:"w-3 h-3 mr-1 group-hover:scale-110 transition-transform duration-300"}),x.label]})})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:calendar",className:"w-4 h-4 text-blue-400 group-hover/item:text-blue-300 group-hover/item:scale-110 transition-all duration-200"}),d("portfolio.vaccines.date"),":"]}),e.jsx("span",{className:"text-white font-medium group-hover/item:text-emerald-100 transition-colors duration-200",children:r(t.vaccine_date,o)})]}),t.veterinarian&&t.veterinarian.trim()&&e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:doctor",className:"w-4 h-4 text-teal-400 group-hover/item:text-teal-300 group-hover/item:scale-110 transition-all duration-200"}),d("portfolio.vaccines.veterinarian"),":"]}),e.jsx("span",{className:"text-white font-medium group-hover/item:text-emerald-100 transition-colors duration-200",children:t.veterinarian})]}),t.notes&&e.jsxs("div",{className:"bg-slate-700/30 p-4 rounded-xl border border-slate-600/50 hover:bg-slate-700/50 hover:border-slate-500/50 transition-all duration-300 group/notes",children:[e.jsxs("span",{className:"text-slate-300 text-sm font-medium block mb-2 group-hover/notes:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:note-text",className:"w-4 h-4 text-amber-400 group-hover/notes:text-amber-300 group-hover/notes:scale-110 transition-all duration-200"}),d("portfolio.vaccines.notes"),":"]}),e.jsx("span",{className:"text-white text-sm italic group-hover/notes:text-slate-100 transition-colors duration-200",children:t.notes})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-700/50 group-hover:border-emerald-400/30 transition-colors duration-300",children:[e.jsxs("button",{onClick:()=>s(t),className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-blue-500/80 to-indigo-600/80 hover:from-blue-500 hover:to-indigo-600 text-white rounded-xl transition-all duration-300 text-sm font-medium inline-flex items-center justify-center shadow-lg hover:shadow-blue-500/25 hover:scale-105 hover:-translate-y-0.5 group/edit",title:d("portfolio.vaccines.editVaccineTitle"),children:[e.jsx(l,{icon:"mdi:pencil",className:"w-4 h-4 mr-2 group-hover/edit:scale-110 transition-transform duration-200"}),e.jsx("span",{className:"group-hover/edit:tracking-wide transition-all duration-200",children:d("portfolio.common.edit")})]}),h==="pending"&&e.jsxs("button",{onClick:()=>c(t),className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-green-500/80 to-emerald-600/80 hover:from-green-500 hover:to-emerald-600 text-white rounded-xl transition-all duration-300 text-sm font-medium inline-flex items-center justify-center shadow-lg hover:shadow-green-500/25 hover:scale-105 hover:-translate-y-0.5 group/complete",title:d("portfolio.vaccines.markCompleted"),children:[e.jsx(l,{icon:"mdi:check",className:"w-4 h-4 mr-2 group-hover/complete:scale-110 transition-transform duration-200"}),e.jsx("span",{className:"group-hover/complete:tracking-wide transition-all duration-200",children:d("portfolio.vaccines.complete")})]}),e.jsx("button",{onClick:()=>n(t),className:"px-4 py-2.5 bg-gradient-to-r from-red-500/80 to-rose-600/80 hover:from-red-500 hover:to-rose-600 text-white rounded-xl transition-all duration-300 text-sm font-medium inline-flex items-center justify-center shadow-lg hover:shadow-red-500/25 hover:scale-105 hover:-translate-y-0.5 group/delete animate-none hover:animate-pulse",title:d("portfolio.vaccines.deleteVaccineTitle"),onMouseEnter:j=>{j.currentTarget.style.animation="shake 0.5s ease-in-out infinite"},onMouseLeave:j=>{j.currentTarget.style.animation="none"},children:e.jsx(l,{icon:"mdi:delete",className:"w-4 h-4 group-hover/delete:scale-125 group-hover/delete:rotate-12 transition-all duration-200"})})]})]})}function jt({formData:t,isEditing:r,isSaving:s,onFormChange:c,onSave:n,onCancel:m}){const{t:a}=E(),d=(o,h)=>{c({...t,[o]:h})};return e.jsxs("div",{className:"mb-8 p-8 bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-sm rounded-2xl border border-slate-700/50 shadow-2xl hover:shadow-emerald-500/10 transition-all duration-500",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8 pb-6 border-b border-slate-700/50",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-500/20 to-green-600/20 rounded-xl border border-emerald-500/30",children:e.jsx(l,{icon:"mdi:needle",className:"w-8 h-8 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-white mb-1",children:a(r?"portfolio.vaccines.editVaccine":"portfolio.vaccines.newVaccine")}),e.jsx("p",{className:"text-slate-400 text-sm",children:a(r?"portfolio.vaccines.editVaccineDescription":"portfolio.vaccines.newVaccineDescription")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:shield-plus",className:"w-4 h-4 text-emerald-400"}),a("portfolio.vaccines.vaccineName")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t.vaccine_name,onChange:o=>d("vaccine_name",o.target.value),required:!0,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-emerald-400/50 focus:border-emerald-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70",placeholder:"e.g.: Rabies, DHPP, etc."}),e.jsx(l,{icon:"mdi:medical-bag",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:doctor",className:"w-4 h-4 text-emerald-400"}),a("portfolio.vaccines.veterinarian")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t.veterinarian,onChange:o=>d("veterinarian",o.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-emerald-400/50 focus:border-emerald-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70",placeholder:"Veterinarian's name"}),e.jsx(l,{icon:"mdi:account-tie",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:calendar",className:"w-4 h-4 text-emerald-400"}),a("portfolio.vaccines.vaccineDate")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:t.vaccine_date,onChange:o=>d("vaccine_date",o.target.value),required:!0,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white focus:ring-2 focus:ring-emerald-400/50 focus:border-emerald-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70"}),e.jsx(l,{icon:"mdi:calendar-today",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:checkbox-marked-circle",className:"w-4 h-4 text-emerald-400"}),a("portfolio.vaccines.status")]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:t.status,onChange:o=>d("status",o.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white focus:ring-2 focus:ring-emerald-400/50 focus:border-emerald-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70 appearance-none",children:[e.jsx("option",{value:"pending",children:a("portfolio.common.pending")}),e.jsx("option",{value:"completed",children:a("portfolio.common.completed")})]}),e.jsx(l,{icon:"mdi:chevron-down",className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),e.jsx(l,{icon:"mdi:clock-outline",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]})]}),e.jsxs("div",{className:"mb-8 group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:note-text",className:"w-4 h-4 text-emerald-400"}),a("portfolio.vaccines.notes")]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:t.notes,onChange:o=>d("notes",o.target.value),rows:4,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-emerald-400/50 focus:border-emerald-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70 resize-none",placeholder:"Observations about the vaccine, reactions, booster date..."}),e.jsx(l,{icon:"mdi:pencil",className:"absolute left-4 top-4 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-700/50",children:[e.jsx("button",{onClick:n,disabled:s,className:"flex-1 px-6 py-4 bg-gradient-to-r from-emerald-500/90 to-green-600/90 hover:from-emerald-500 hover:to-green-600 text-white font-semibold rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-emerald-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 hover:scale-[1.02] hover:-translate-y-0.5 group/save",children:s?e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:"mdi:loading",className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:a(r?"portfolio.common.updating":"portfolio.common.saving")})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:"mdi:content-save",className:"w-5 h-5 group-hover/save:scale-110 transition-transform"}),e.jsx("span",{className:"group-hover/save:tracking-wide transition-all",children:a(r?"portfolio.common.update":"portfolio.common.save")})]})}),e.jsxs("button",{onClick:m,className:"px-6 py-4 bg-gradient-to-r from-slate-600/90 to-slate-700/90 hover:from-slate-600 hover:to-slate-700 text-white font-semibold rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl flex items-center gap-3 hover:scale-[1.02] hover:-translate-y-0.5 group/cancel",children:[e.jsx(l,{icon:"mdi:close",className:"w-5 h-5 group-hover/cancel:scale-110 transition-transform"}),e.jsx("span",{className:"group-hover/cancel:tracking-wide transition-all",children:a("portfolio.common.cancel")})]})]})]})}function Nt({medication:t,formatDate:r,onEdit:s,onComplete:c,onDelete:n}){const{t:m}=E();p.useEffect(()=>{if(!document.getElementById("shake-animation")){const h=document.createElement("style");h.id="shake-animation",h.textContent=`
        @keyframes shake {
          0%, 100% { transform: translateX(0) rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px) rotate(-1deg); }
          20%, 40%, 60%, 80% { transform: translateX(2px) rotate(1deg); }
        }
      `,document.head.appendChild(h)}},[]);const a=t.status||"pending",o=(()=>{switch(a){case"pending":return{icon:"mdi:clock-outline",label:m("portfolio.medications.card.statusPending"),color:"bg-yellow-500/20 text-yellow-400"};case"completed":return{icon:"mdi:check-circle",label:m("portfolio.medications.card.statusCompleted"),color:"bg-green-500/20 text-green-400"};default:return{icon:"mdi:clock-outline",label:m("portfolio.medications.card.statusPending"),color:"bg-yellow-500/20 text-yellow-400"}}})();return e.jsxs("div",{className:"group bg-gradient-to-br from-slate-800/60 to-slate-900/60 backdrop-blur-sm p-6 rounded-2xl border border-slate-700/50 shadow-lg hover:shadow-2xl hover:shadow-emerald-500/10 hover:border-emerald-400/30 hover:scale-[1.02] transition-all duration-500 ease-out cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("h4",{className:"text-xl font-bold text-white group-hover:text-emerald-50 transition-colors duration-300 mb-2",children:t.medication_name})}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsxs("span",{className:`px-3 py-1.5 rounded-full text-xs font-medium flex items-center transition-all duration-300 ${o.color} group-hover:scale-105`,children:[e.jsx(l,{icon:o.icon,className:"w-3 h-3 mr-1 group-hover:scale-110 transition-transform duration-300"}),o.label]})})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:pill",className:"w-4 h-4 text-blue-400 group-hover/item:text-blue-300 group-hover/item:scale-110 transition-all duration-200"}),m("portfolio.medications.card.dosageLabel")]}),e.jsx("span",{className:"text-white font-medium group-hover/item:text-emerald-100 transition-colors duration-200",children:t.dosage})]}),e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:clock",className:"w-4 h-4 text-purple-400 group-hover/item:text-purple-300 group-hover/item:scale-110 transition-all duration-200"}),m("portfolio.medications.card.frequencyLabel")]}),e.jsx("span",{className:"text-white font-medium group-hover/item:text-emerald-100 transition-colors duration-200",children:m("portfolio.medications.card.frequencyText",{hours:t.frequency_hours})})]}),e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:calendar-start",className:"w-4 h-4 text-green-400 group-hover/item:text-green-300 group-hover/item:scale-110 transition-all duration-200"}),m("portfolio.medications.card.startLabel")]}),e.jsx("span",{className:"text-white font-medium group-hover/item:text-emerald-100 transition-colors duration-200",children:r(t.start_date)})]}),t.end_date&&e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:calendar-end",className:"w-4 h-4 text-red-400 group-hover/item:text-red-300 group-hover/item:scale-110 transition-all duration-200"}),m("portfolio.medications.card.endLabel")]}),e.jsx("span",{className:"text-white font-medium group-hover/item:text-emerald-100 transition-colors duration-200",children:r(t.end_date)})]}),t.veterinarian&&t.veterinarian.trim()&&e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:doctor",className:"w-4 h-4 text-teal-400 group-hover/item:text-teal-300 group-hover/item:scale-110 transition-all duration-200"}),m("portfolio.medications.card.veterinarianLabel")]}),e.jsx("span",{className:"text-white font-medium group-hover/item:text-emerald-100 transition-colors duration-200",children:t.veterinarian})]}),t.notes&&e.jsxs("div",{className:"bg-slate-700/30 p-4 rounded-xl border border-slate-600/50 hover:bg-slate-700/50 hover:border-slate-500/50 transition-all duration-300 group/notes",children:[e.jsxs("span",{className:"text-slate-300 text-sm font-medium block mb-2 group-hover/notes:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:note-text",className:"w-4 h-4 text-amber-400 group-hover/notes:text-amber-300 group-hover/notes:scale-110 transition-all duration-200"}),m("portfolio.medications.card.notesLabel")]}),e.jsx("span",{className:"text-white text-sm italic group-hover/notes:text-slate-100 transition-colors duration-200",children:t.notes})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-700/50 group-hover:border-emerald-400/30 transition-colors duration-300",children:[e.jsxs("button",{onClick:()=>s(t),className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-blue-500/80 to-indigo-600/80 hover:from-blue-500 hover:to-indigo-600 text-white rounded-xl transition-all duration-300 text-sm font-medium inline-flex items-center justify-center shadow-lg hover:shadow-blue-500/25 hover:scale-105 hover:-translate-y-0.5 group/edit",title:m("portfolio.medications.card.editTitle"),children:[e.jsx(l,{icon:"mdi:pencil",className:"w-4 h-4 mr-2 group-hover/edit:scale-110 transition-transform duration-200"}),e.jsx("span",{className:"group-hover/edit:tracking-wide transition-all duration-200",children:m("portfolio.medications.card.editButton")})]}),a==="pending"&&e.jsxs("button",{onClick:()=>c(t),className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-green-500/80 to-emerald-600/80 hover:from-green-500 hover:to-emerald-600 text-white rounded-xl transition-all duration-300 text-sm font-medium inline-flex items-center justify-center shadow-lg hover:shadow-green-500/25 hover:scale-105 hover:-translate-y-0.5 group/complete",title:m("portfolio.medications.card.completeTitle"),children:[e.jsx(l,{icon:"mdi:check",className:"w-4 h-4 mr-2 group-hover/complete:scale-110 transition-transform duration-200"}),e.jsx("span",{className:"group-hover/complete:tracking-wide transition-all duration-200",children:m("portfolio.medications.card.completeButton")})]}),e.jsx("button",{onClick:()=>n(t),className:"px-4 py-2.5 bg-gradient-to-r from-red-500/80 to-rose-600/80 hover:from-red-500 hover:to-rose-600 text-white rounded-xl transition-all duration-300 text-sm font-medium inline-flex items-center justify-center shadow-lg hover:shadow-red-500/25 hover:scale-105 hover:-translate-y-0.5 group/delete animate-none hover:animate-pulse",title:m("portfolio.medications.card.deleteTitle"),onMouseEnter:h=>{h.currentTarget.style.animation="shake 0.5s ease-in-out infinite"},onMouseLeave:h=>{h.currentTarget.style.animation="none"},children:e.jsx(l,{icon:"mdi:delete",className:"w-4 h-4 group-hover/delete:scale-125 group-hover/delete:rotate-12 transition-all duration-200"})})]})]})}function yt({formData:t,isEditing:r,isSaving:s,onFormChange:c,onSave:n,onCancel:m}){const{t:a}=E(),d=(o,h)=>{c({...t,[o]:h})};return e.jsxs("div",{className:"mb-8 p-8 bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-sm rounded-2xl border border-slate-700/50 shadow-2xl hover:shadow-purple-500/10 transition-all duration-500",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8 pb-6 border-b border-slate-700/50",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500/20 to-pink-600/20 rounded-xl border border-purple-500/30",children:e.jsx(l,{icon:"mdi:pill",className:"w-8 h-8 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-white mb-1",children:a(r?"portfolio.medications.form.editTitle":"portfolio.medications.form.newTitle")}),e.jsx("p",{className:"text-slate-400 text-sm",children:a(r?"portfolio.medications.form.editSubtitle":"portfolio.medications.form.newSubtitle")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:pill",className:"w-4 h-4 text-purple-400"}),a("portfolio.medications.form.medicationNameLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t.medication_name,onChange:o=>d("medication_name",o.target.value),required:!0,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70",placeholder:a("portfolio.medications.form.medicationNamePlaceholder")}),e.jsx(l,{icon:"mdi:medical-bag",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:eyedropper",className:"w-4 h-4 text-purple-400"}),a("portfolio.medications.form.dosageLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t.dosage,onChange:o=>d("dosage",o.target.value),required:!0,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70",placeholder:a("portfolio.medications.form.dosagePlaceholder")}),e.jsx(l,{icon:"mdi:scale-balance",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:clock",className:"w-4 h-4 text-purple-400"}),a("portfolio.medications.form.frequencyLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:t.frequency_hours,onChange:o=>d("frequency_hours",o.target.value),required:!0,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70",placeholder:a("portfolio.medications.form.frequencyPlaceholder")}),e.jsx(l,{icon:"mdi:timer",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:doctor",className:"w-4 h-4 text-purple-400"}),a("portfolio.medications.form.veterinarianLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t.veterinarian,onChange:o=>d("veterinarian",o.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70",placeholder:a("portfolio.medications.form.veterinarianPlaceholder")}),e.jsx(l,{icon:"mdi:account-tie",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:calendar-start",className:"w-4 h-4 text-purple-400"}),a("portfolio.medications.form.startDateLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:t.start_date,onChange:o=>d("start_date",o.target.value),required:!0,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70"}),e.jsx(l,{icon:"mdi:calendar-today",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:calendar-end",className:"w-4 h-4 text-purple-400"}),a("portfolio.medications.form.endDateLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:t.end_date,onChange:o=>d("end_date",o.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70"}),e.jsx(l,{icon:"mdi:calendar-check",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:checkbox-marked-circle",className:"w-4 h-4 text-purple-400"}),a("portfolio.medications.form.statusLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:t.status,onChange:o=>d("status",o.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70 appearance-none",children:[e.jsx("option",{value:"pending",children:a("portfolio.medications.form.statusPending")}),e.jsx("option",{value:"completed",children:a("portfolio.medications.form.statusCompleted")})]}),e.jsx(l,{icon:"mdi:chevron-down",className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),e.jsx(l,{icon:"mdi:clock-outline",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]})]}),e.jsxs("div",{className:"mb-8 group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:note-text",className:"w-4 h-4 text-purple-400"}),a("portfolio.medications.form.notesLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:t.notes,onChange:o=>d("notes",o.target.value),rows:4,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70 resize-none",placeholder:a("portfolio.medications.form.notesPlaceholder")}),e.jsx(l,{icon:"mdi:pencil",className:"absolute left-4 top-4 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-700/50",children:[e.jsx("button",{onClick:n,disabled:s,className:"flex-1 px-6 py-4 bg-gradient-to-r from-purple-500/90 to-pink-600/90 hover:from-purple-500 hover:to-pink-600 text-white font-semibold rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-purple-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 hover:scale-[1.02] hover:-translate-y-0.5 group/save",children:s?e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:"mdi:loading",className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:a(r?"portfolio.medications.form.updatingText":"portfolio.medications.form.savingText")})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:"mdi:content-save",className:"w-5 h-5 group-hover/save:scale-110 transition-transform"}),e.jsx("span",{className:"group-hover/save:tracking-wide transition-all",children:a(r?"portfolio.medications.form.updateButton":"portfolio.medications.form.saveButton")})]})}),e.jsxs("button",{onClick:m,className:"px-6 py-4 bg-gradient-to-r from-slate-600/90 to-slate-700/90 hover:from-slate-600 hover:to-slate-700 text-white font-semibold rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl flex items-center gap-3 hover:scale-[1.02] hover:-translate-y-0.5 group/cancel",children:[e.jsx(l,{icon:"mdi:close",className:"w-5 h-5 group-hover/cancel:scale-110 transition-transform"}),e.jsx("span",{className:"group-hover/cancel:tracking-wide transition-all",children:a("portfolio.medications.form.cancelButton")})]})]})]})}function _t({deworming:t,formatDate:r,onEdit:s,onComplete:c,onDelete:n}){const{t:m}=E();p.useEffect(()=>{if(!document.getElementById("shake-animation")){const h=document.createElement("style");h.id="shake-animation",h.textContent=`
        @keyframes shake {
          0%, 100% { transform: translateX(0) rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px) rotate(-1deg); }
          20%, 40%, 60%, 80% { transform: translateX(2px) rotate(1deg); }
        }
      `,document.head.appendChild(h)}},[]);const a=t.status||"pending",o=(()=>{switch(a){case"pending":return{icon:"mdi:clock-outline",label:m("portfolio.dewormings.card.statusPending"),color:"bg-yellow-500/20 text-yellow-400"};case"completed":return{icon:"mdi:check-circle",label:m("portfolio.dewormings.card.statusCompleted"),color:"bg-green-500/20 text-green-400"};default:return{icon:"mdi:clock-outline",label:m("portfolio.dewormings.card.statusPending"),color:"bg-yellow-500/20 text-yellow-400"}}})();return e.jsxs("div",{className:"group bg-gradient-to-br from-slate-800/60 to-slate-900/60 backdrop-blur-sm p-6 rounded-2xl border border-slate-700/50 shadow-lg hover:shadow-2xl hover:shadow-emerald-500/10 hover:border-emerald-400/30 hover:scale-[1.02] transition-all duration-500 ease-out cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("h4",{className:"text-xl font-bold text-white group-hover:text-emerald-50 transition-colors duration-300 mb-2",children:t.product_name})}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsxs("span",{className:`px-3 py-1.5 rounded-full text-xs font-medium flex items-center transition-all duration-300 ${o.color} group-hover:scale-105`,children:[e.jsx(l,{icon:o.icon,className:"w-3 h-3 mr-1 group-hover:scale-110 transition-transform duration-300"}),o.label]})})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:calendar",className:"w-4 h-4 text-blue-400 group-hover/item:text-blue-300 group-hover/item:scale-110 transition-all duration-200"}),m("portfolio.dewormings.card.dateLabel")]}),e.jsx("span",{className:"text-white font-medium group-hover/item:text-emerald-100 transition-colors duration-200",children:r(t.treatment_date)})]}),t.weight_at_treatment&&e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:scale",className:"w-4 h-4 text-purple-400 group-hover/item:text-purple-300 group-hover/item:scale-110 transition-all duration-200"}),m("portfolio.dewormings.card.weightLabel")]}),e.jsxs("span",{className:"text-white font-medium group-hover/item:text-emerald-100 transition-colors duration-200",children:[t.weight_at_treatment," kg"]})]}),t.next_treatment_date&&e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:calendar-clock",className:"w-4 h-4 text-yellow-400 group-hover/item:text-yellow-300 group-hover/item:scale-110 transition-all duration-200"}),m("portfolio.dewormings.card.nextLabel")]}),e.jsx("span",{className:"text-yellow-400 font-medium group-hover/item:text-yellow-300 transition-colors duration-200",children:r(t.next_treatment_date)})]}),t.veterinarian&&t.veterinarian.trim()&&e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:doctor",className:"w-4 h-4 text-teal-400 group-hover/item:text-teal-300 group-hover/item:scale-110 transition-all duration-200"}),m("portfolio.dewormings.card.veterinarianLabel")]}),e.jsx("span",{className:"text-white font-medium group-hover/item:text-emerald-100 transition-colors duration-200",children:t.veterinarian})]}),t.notes&&e.jsxs("div",{className:"bg-slate-700/30 p-4 rounded-xl border border-slate-600/50 hover:bg-slate-700/50 hover:border-slate-500/50 transition-all duration-300 group/notes",children:[e.jsxs("span",{className:"text-slate-300 text-sm font-medium block mb-2 group-hover/notes:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:note-text",className:"w-4 h-4 text-amber-400 group-hover/notes:text-amber-300 group-hover/notes:scale-110 transition-all duration-200"}),m("portfolio.dewormings.card.notesLabel")]}),e.jsx("span",{className:"text-white text-sm italic group-hover/notes:text-slate-100 transition-colors duration-200",children:t.notes})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-700/50 group-hover:border-emerald-400/30 transition-colors duration-300",children:[e.jsxs("button",{onClick:()=>s(t),className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-blue-500/80 to-indigo-600/80 hover:from-blue-500 hover:to-indigo-600 text-white rounded-xl transition-all duration-300 text-sm font-medium inline-flex items-center justify-center shadow-lg hover:shadow-blue-500/25 hover:scale-105 hover:-translate-y-0.5 group/edit",title:m("portfolio.dewormings.card.editTitle"),children:[e.jsx(l,{icon:"mdi:pencil",className:"w-4 h-4 mr-2 group-hover/edit:scale-110 transition-transform duration-200"}),e.jsx("span",{className:"group-hover/edit:tracking-wide transition-all duration-200",children:m("portfolio.dewormings.card.editButton")})]}),a==="pending"&&e.jsxs("button",{onClick:()=>c(t),className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-green-500/80 to-emerald-600/80 hover:from-green-500 hover:to-emerald-600 text-white rounded-xl transition-all duration-300 text-sm font-medium inline-flex items-center justify-center shadow-lg hover:shadow-green-500/25 hover:scale-105 hover:-translate-y-0.5 group/complete",title:m("portfolio.dewormings.card.applyTitle"),children:[e.jsx(l,{icon:"mdi:check",className:"w-4 h-4 mr-2 group-hover/complete:scale-110 transition-transform duration-200"}),e.jsx("span",{className:"group-hover/complete:tracking-wide transition-all duration-200",children:m("portfolio.dewormings.card.applyButton")})]}),e.jsx("button",{onClick:()=>n(t),className:"px-4 py-2.5 bg-gradient-to-r from-red-500/80 to-rose-600/80 hover:from-red-500 hover:to-rose-600 text-white rounded-xl transition-all duration-300 text-sm font-medium inline-flex items-center justify-center shadow-lg hover:shadow-red-500/25 hover:scale-105 hover:-translate-y-0.5 group/delete animate-none hover:animate-pulse",title:m("portfolio.dewormings.card.deleteTitle"),onMouseEnter:h=>{h.currentTarget.style.animation="shake 0.5s ease-in-out infinite"},onMouseLeave:h=>{h.currentTarget.style.animation="none"},children:e.jsx(l,{icon:"mdi:delete",className:"w-4 h-4 group-hover/delete:scale-125 group-hover/delete:rotate-12 transition-all duration-200"})})]})]})}function kt({formData:t,isEditing:r,isSaving:s,onFormChange:c,onSave:n,onCancel:m}){const{t:a}=E(),d=(o,h)=>{c({...t,[o]:h})};return e.jsxs("div",{className:"mb-8 p-8 bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-sm rounded-2xl border border-slate-700/50 shadow-2xl hover:shadow-orange-500/10 transition-all duration-500",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8 pb-6 border-b border-slate-700/50",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500/20 to-amber-600/20 rounded-xl border border-orange-500/30",children:e.jsx(l,{icon:"mdi:bug",className:"w-8 h-8 text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-white mb-1",children:a(r?"portfolio.dewormings.form.editTitle":"portfolio.dewormings.form.newTitle")}),e.jsx("p",{className:"text-slate-400 text-sm",children:a(r?"portfolio.dewormings.form.editSubtitle":"portfolio.dewormings.form.newSubtitle")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:pill",className:"w-4 h-4 text-orange-400"}),a("portfolio.dewormings.form.productLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t.product_name,onChange:o=>d("product_name",o.target.value),required:!0,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-orange-400/50 focus:border-orange-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70",placeholder:a("portfolio.dewormings.form.productPlaceholder")}),e.jsx(l,{icon:"mdi:medical-bag",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:calendar",className:"w-4 h-4 text-orange-400"}),a("portfolio.dewormings.form.treatmentDateLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:t.treatment_date,onChange:o=>d("treatment_date",o.target.value),required:!0,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white focus:ring-2 focus:ring-orange-400/50 focus:border-orange-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70"}),e.jsx(l,{icon:"mdi:calendar-today",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:scale",className:"w-4 h-4 text-orange-400"}),a("portfolio.dewormings.form.weightLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.1",value:t.weight_at_treatment,onChange:o=>d("weight_at_treatment",o.target.value),placeholder:a("portfolio.dewormings.form.weightPlaceholder"),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-orange-400/50 focus:border-orange-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70"}),e.jsx(l,{icon:"mdi:weight-kilogram",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[e.jsx(l,{icon:"mdi:lightbulb",className:"w-4 h-4 text-blue-400 flex-shrink-0"}),e.jsx("p",{className:"text-xs text-blue-300",children:a("portfolio.dewormings.form.weightInfo")})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:calendar-clock",className:"w-4 h-4 text-orange-400"}),a("portfolio.dewormings.form.nextDateLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:t.next_treatment_date,onChange:o=>d("next_treatment_date",o.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white focus:ring-2 focus:ring-orange-400/50 focus:border-orange-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70"}),e.jsx(l,{icon:"mdi:calendar-arrow-right",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:doctor",className:"w-4 h-4 text-orange-400"}),a("portfolio.dewormings.form.veterinarianLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t.veterinarian,onChange:o=>d("veterinarian",o.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-orange-400/50 focus:border-orange-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70",placeholder:a("portfolio.dewormings.form.veterinarianPlaceholder")}),e.jsx(l,{icon:"mdi:hospital-building",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:checkbox-marked-circle",className:"w-4 h-4 text-orange-400"}),a("portfolio.dewormings.form.statusLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:t.status,onChange:o=>d("status",o.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white focus:ring-2 focus:ring-orange-400/50 focus:border-orange-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70 appearance-none",children:[e.jsx("option",{value:"pending",children:a("portfolio.dewormings.form.statusPending")}),e.jsx("option",{value:"completed",children:a("portfolio.dewormings.form.statusCompleted")})]}),e.jsx(l,{icon:"mdi:chevron-down",className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),e.jsx(l,{icon:"mdi:clock-outline",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]})]}),e.jsxs("div",{className:"mb-8 group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:note-text",className:"w-4 h-4 text-orange-400"}),a("portfolio.dewormings.form.notesLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:t.notes,onChange:o=>d("notes",o.target.value),rows:4,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-orange-400/50 focus:border-orange-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70 resize-none",placeholder:a("portfolio.dewormings.form.notesPlaceholder")}),e.jsx(l,{icon:"mdi:pencil",className:"absolute left-4 top-4 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-700/50",children:[e.jsx("button",{onClick:n,disabled:s,className:"flex-1 px-6 py-4 bg-gradient-to-r from-orange-400 to-red-400 hover:from-orange-400 hover:to-red-500 text-white font-semibold rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-orange-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 hover:scale-[1.02] hover:-translate-y-0.5 group/save",children:s?e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:"mdi:loading",className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:a(r?"portfolio.dewormings.form.updatingText":"portfolio.dewormings.form.savingText")})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:"mdi:content-save",className:"w-5 h-5 group-hover/save:scale-110 transition-transform"}),e.jsx("span",{className:"group-hover/save:tracking-wide transition-all",children:a(r?"portfolio.dewormings.form.updateButton":"portfolio.dewormings.form.saveButton")})]})}),e.jsxs("button",{onClick:m,className:"px-6 py-4 bg-gradient-to-r from-slate-600/90 to-slate-700/90 hover:from-slate-600 hover:to-slate-700 text-white font-semibold rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl flex items-center gap-3 hover:scale-[1.02] hover:-translate-y-0.5 group/cancel",children:[e.jsx(l,{icon:"mdi:close",className:"w-5 h-5 group-hover/cancel:scale-110 transition-transform"}),e.jsx("span",{className:"group-hover/cancel:tracking-wide transition-all",children:a("portfolio.dewormings.form.cancelButton")})]})]})]})}function Ct({weightHistory:t,currentWeight:r,formatDate:s,onEdit:c,onDelete:n}){const{t:m}=E(),d=!t||t.length===0?[]:[...t].sort((x,j)=>new Date(x.measurement_date).getTime()-new Date(j.measurement_date).getTime()).map((x,j)=>({date:x.measurement_date,weight:x.weight_kg,index:j})),o=d.length>0?Math.max(...d.map(x=>x.weight)):r,h=d.length>0?Math.min(...d.map(x=>x.weight)):r,v=o-h||1;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 p-8 rounded-2xl text-center text-white shadow-xl",children:[e.jsxs("span",{className:"block text-5xl font-bold mb-2",children:[r," kg"]}),e.jsx("span",{className:"text-xl opacity-90",children:m("home.weight.currentWeight")})]})}),d.length>1&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-slate-800 rounded-2xl border border-slate-700 shadow-xl p-6",children:[e.jsxs("h4",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[e.jsx(l,{icon:"mdi:chart-line",className:"mr-3 w-6 h-6 text-green-400"}),m("portfolio.weight.weightEvolution")]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-xl p-4 border border-slate-600/30",children:[e.jsxs("svg",{viewBox:"0 0 600 200",className:"w-full h-40 mb-3",preserveAspectRatio:"xMidYMid meet",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"60",height:"30",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 60 0 L 0 0 0 30",fill:"none",stroke:"rgb(71 85 105)",strokeWidth:"0.5",opacity:"0.3"})})}),e.jsx("rect",{width:"600",height:"200",fill:"url(#grid)"}),e.jsx("polyline",{points:d.map((x,j)=>`${j/(d.length-1)*560+20},${180-(x.weight-h)/v*140}`).join(" "),fill:"none",stroke:"url(#weightGradient)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"weightGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"#10b981",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"#06d6a0",stopOpacity:1}})]})}),d.map((x,j)=>e.jsxs("g",{children:[e.jsx("circle",{cx:j/(d.length-1)*560+20,cy:180-(x.weight-h)/v*140,r:"5",fill:"#10b981",stroke:"#ffffff",strokeWidth:"2",className:"hover:r-7 transition-all cursor-pointer"}),e.jsxs("text",{x:j/(d.length-1)*560+20,y:180-(x.weight-h)/v*140-12,textAnchor:"middle",fontSize:"11",fill:"#e2e8f0",className:"font-medium",children:[x.weight,"kg"]})]},j)),d.map((x,j)=>e.jsx("text",{x:j/(d.length-1)*560+20,y:195,textAnchor:"middle",fontSize:"10",fill:"#94a3b8",className:"font-medium",children:new Date(x.date).toLocaleDateString("es-ES",{month:"short",day:"numeric"})},`date-${j}`))]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-400",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-green-500 to-green-400 rounded-full mr-2"}),m("portfolio.weight.progressText",{count:d.length})]}),e.jsx("span",{children:m("portfolio.weight.rangeText",{min:h,max:o})})]})]})]})}),e.jsxs("div",{className:"bg-slate-800 rounded-2xl border border-slate-700 shadow-xl overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-slate-700",children:e.jsx("h4",{className:"text-xl font-bold text-white",children:m("home.weight.measurements")})}),e.jsx("div",{className:"divide-y divide-slate-700",children:t&&t.length>0?[...t].sort((x,j)=>new Date(j.measurement_date).getTime()-new Date(x.measurement_date).getTime()).map(x=>e.jsx("div",{className:"p-6 hover:bg-slate-700/50 transition-colors",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-center",children:[e.jsx("div",{className:"text-blue-400 font-medium",children:s(x.measurement_date)}),e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[x.weight_kg," kg"]}),e.jsx("div",{className:"text-slate-300 italic text-sm",children:x.notes||m("home.weight.noObservations")}),e.jsx("div",{className:"text-slate-400 text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-1",children:"👤"}),m("home.weight.addedBy"),": ",x.added_by_user||"Usuario"]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>c(x),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-all text-sm font-medium",title:m("portfolio.weight.editRecordTitle"),children:e.jsx(l,{icon:"mdi:pencil",className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>n(x),className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-500 transition-all text-sm font-medium inline-flex items-center justify-center",title:m("portfolio.weight.deleteRecordTitle"),children:e.jsx(l,{icon:"mdi:delete",className:"w-4 h-4"})})]})]})},x.id)):e.jsxs("div",{className:"p-6 text-center py-12",children:[e.jsx(l,{icon:"mdi:scale-balance",className:"text-6xl block mb-4 mx-auto text-slate-400"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-300 mb-2",children:m("portfolio.weight.noWeightHistory")}),e.jsx("p",{className:"text-slate-400",children:m("portfolio.weight.addFirstWeightRecord")})]})})]})]})}function Dt({formData:t,isEditing:r,isSaving:s,onFormChange:c,onSave:n,onCancel:m}){const{t:a}=E(),d=(o,h)=>{c({...t,[o]:h})};return e.jsxs("div",{className:"mb-8 p-8 bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-sm rounded-2xl border border-slate-700/50 shadow-2xl hover:shadow-blue-500/10 transition-all duration-500",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8 pb-6 border-b border-slate-700/50",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500/20 to-indigo-600/20 rounded-xl border border-blue-500/30",children:e.jsx(l,{icon:"mdi:scale",className:"w-8 h-8 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-white mb-1",children:a(r?"home.weight.editRecord":"home.weight.newRecord")}),e.jsx("p",{className:"text-slate-400 text-sm",children:a(r?"portfolio.weight.editFormSubtitle":"portfolio.weight.newFormSubtitle")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:weight-kilogram",className:"w-4 h-4 text-blue-400"}),a("home.weight.weightKg")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.1",value:t.weight_kg,onChange:o=>d("weight_kg",o.target.value),required:!0,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-blue-400/50 focus:border-blue-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70",placeholder:a("portfolio.weight.weightPlaceholder")}),e.jsx(l,{icon:"mdi:scale-balance",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:calendar",className:"w-4 h-4 text-blue-400"}),a("home.weight.date")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:t.measurement_date,onChange:o=>d("measurement_date",o.target.value),required:!0,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white focus:ring-2 focus:ring-blue-400/50 focus:border-blue-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70"}),e.jsx(l,{icon:"mdi:calendar-today",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]})]}),e.jsxs("div",{className:"mb-8 group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:note-text",className:"w-4 h-4 text-blue-400"}),a("home.weight.notes")]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:t.notes,onChange:o=>d("notes",o.target.value),rows:4,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-blue-400/50 focus:border-blue-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70 resize-none",placeholder:a("home.weight.notesPlaceholder")}),e.jsx(l,{icon:"mdi:pencil",className:"absolute left-4 top-4 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-700/50",children:[e.jsx("button",{onClick:n,disabled:s,className:"flex-1 px-6 py-4 bg-gradient-to-r from-blue-500/90 to-indigo-600/90 hover:from-blue-500 hover:to-indigo-600 text-white font-semibold rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 hover:scale-[1.02] hover:-translate-y-0.5 group/save",children:s?e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:"mdi:loading",className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:a(r?"home.weight.updating":"home.weight.saving")})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:"mdi:content-save",className:"w-5 h-5 group-hover/save:scale-110 transition-transform"}),e.jsx("span",{className:"group-hover/save:tracking-wide transition-all",children:a(r?"home.weight.update":"home.weight.save")})]})}),e.jsxs("button",{onClick:m,className:"px-6 py-4 bg-gradient-to-r from-slate-600/90 to-slate-700/90 hover:from-slate-600 hover:to-slate-700 text-white font-semibold rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl flex items-center gap-3 hover:scale-[1.02] hover:-translate-y-0.5 group/cancel",children:[e.jsx(l,{icon:"mdi:close",className:"w-5 h-5 group-hover/cancel:scale-110 transition-transform"}),e.jsx("span",{className:"group-hover/cancel:tracking-wide transition-all",children:a("home.weight.cancel")})]})]})]})}function Et({document:t,formatDate:r,onEdit:s,onDelete:c}){const{t:n}=E();p.useEffect(()=>{try{if(!document.getElementById("shake-animation")){const o=document.createElement("style");o.id="shake-animation",o.textContent=`
          @keyframes shake {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-2px) rotate(-1deg); }
            20%, 40%, 60%, 80% { transform: translateX(2px) rotate(1deg); }
          }
        `,document.head.appendChild(o)}}catch(o){console.error("Error adding shake animation:",o)}},[]);const a=(()=>{switch(t.document_type){case"certificate":return{icon:"mdi:certificate",label:n("portfolio.documents.card.certificateType"),color:"bg-blue-500/20 text-blue-400"};case"medical":return{icon:"mdi:file-medical",label:n("portfolio.documents.card.medicalType"),color:"bg-red-500/20 text-red-400"};case"insurance":return{icon:"mdi:shield-check",label:n("portfolio.documents.card.insuranceType"),color:"bg-green-500/20 text-green-400"};case"identification":return{icon:"mdi:card-account-details",label:n("portfolio.documents.card.identificationType"),color:"bg-yellow-500/20 text-yellow-400"};case"other":return{icon:"mdi:file-document",label:n("portfolio.documents.card.otherType"),color:"bg-slate-500/20 text-slate-400"};default:return{icon:"mdi:file-document",label:n("portfolio.documents.card.documentType"),color:"bg-slate-500/20 text-slate-400"}}})(),d=t.expiry_date&&new Date(t.expiry_date)<new Date;return e.jsxs("div",{className:"group bg-gradient-to-br from-slate-800/60 to-slate-900/60 backdrop-blur-sm p-6 rounded-2xl border border-slate-700/50 shadow-lg hover:shadow-2xl hover:shadow-emerald-500/10 hover:border-emerald-400/30 hover:scale-[1.02] transition-all duration-500 ease-out cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("h4",{className:"text-xl font-bold text-white group-hover:text-emerald-50 transition-colors duration-300 mb-2",children:t.document_name})}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs("span",{className:`px-3 py-1.5 rounded-full text-xs font-medium flex items-center transition-all duration-300 ${a.color} group-hover:scale-105`,children:[e.jsx(l,{icon:a.icon,className:"w-3 h-3 mr-1 group-hover:scale-110 transition-transform duration-300"}),a.label]}),d&&e.jsxs("span",{className:"bg-red-500/20 text-red-400 px-3 py-1.5 rounded-full text-xs font-medium flex items-center",children:[e.jsx(l,{icon:"mdi:alert-circle",className:"w-3 h-3 mr-1"}),n("portfolio.documents.card.expiredStatus")]})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"tabler:upload",className:"w-4 h-4 text-teal-400 group-hover/item:text-teal-300 group-hover/item:scale-110 transition-all duration-200"}),n("portfolio.documents.card.uploadedLabel")]}),e.jsx("span",{className:"text-white font-medium group-hover/item:text-emerald-100 transition-colors duration-200",children:r(t.upload_date)})]}),t.expiry_date&&e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:calendar-clock",className:"w-4 h-4 text-yellow-400 group-hover/item:text-yellow-300 group-hover/item:scale-110 transition-all duration-200"}),n("portfolio.documents.card.expiresLabel")]}),e.jsx("span",{className:`font-medium transition-colors duration-200 ${d?"text-red-400":"text-white group-hover/item:text-emerald-100"}`,children:r(t.expiry_date)})]}),t.veterinarian&&e.jsxs("div",{className:"flex justify-between py-2 px-2 rounded-lg hover:bg-slate-700/30 transition-colors duration-200 group/item",children:[e.jsxs("span",{className:"text-slate-300 group-hover/item:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:doctor",className:"w-4 h-4 text-teal-400 group-hover/item:text-teal-300 group-hover/item:scale-110 transition-all duration-200"}),n("portfolio.documents.card.veterinarianLabel")]}),e.jsx("span",{className:"text-white font-medium group-hover/item:text-emerald-100 transition-colors duration-200",children:t.veterinarian})]}),t.files&&t.files.length>0&&e.jsxs("div",{className:"bg-slate-700/30 p-4 rounded-xl border border-slate-600/50 hover:bg-slate-700/50 hover:border-slate-500/50 transition-all duration-300 group/files",children:[e.jsxs("span",{className:"text-slate-300 text-sm font-medium block mb-3 group-hover/files:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:file-multiple",className:"w-4 h-4 text-purple-400 group-hover/files:text-purple-300 group-hover/files:scale-110 transition-all duration-200"}),n("portfolio.documents.card.filesLabel")," (",t.files.length,"):"]}),e.jsx("div",{className:"space-y-2",children:t.files.map((o,h)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-600/40 rounded-lg hover:bg-slate-600/60 transition-colors group/file",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(l,{icon:"mdi:file",className:"w-4 h-4 text-purple-400 group-hover/file:text-purple-300 transition-colors flex-shrink-0"}),e.jsx("span",{className:"text-white text-sm font-medium truncate group-hover/file:text-purple-100 transition-colors",children:o.file_name})]}),e.jsx("button",{onClick:()=>{const v=`/api/${o.file_path}`;window.open(v,"_blank")},className:"ml-2 p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 rounded-lg transition-all duration-200 hover:scale-105 flex-shrink-0",title:n("portfolio.documents.card.viewFileTitle",{fileName:o.file_name}),children:e.jsx(l,{icon:"mdi:eye",className:"w-4 h-4"})})]},`${o.file_path}-${h}`))})]}),t.description&&e.jsxs("div",{className:"bg-slate-700/30 p-4 rounded-xl border border-slate-600/50 hover:bg-slate-700/50 hover:border-slate-500/50 transition-all duration-300 group/desc",children:[e.jsxs("span",{className:"text-slate-300 text-sm font-medium block mb-2 group-hover/desc:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:text-box",className:"w-4 h-4 text-amber-400 group-hover/desc:text-amber-300 group-hover/desc:scale-110 transition-all duration-200"}),n("portfolio.documents.card.descriptionLabel")]}),e.jsx("span",{className:"text-white text-sm group-hover/desc:text-slate-100 transition-colors duration-200",children:t.description})]}),t.notes&&e.jsxs("div",{className:"bg-slate-700/30 p-4 rounded-xl border border-slate-600/50 hover:bg-slate-700/50 hover:border-slate-500/50 transition-all duration-300 group/notes",children:[e.jsxs("span",{className:"text-slate-300 text-sm font-medium block mb-2 group-hover/notes:text-slate-200 transition-colors duration-200 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:note-text",className:"w-4 h-4 text-amber-400 group-hover/notes:text-amber-300 group-hover/notes:scale-110 transition-all duration-200"}),n("portfolio.documents.card.notesLabel")]}),e.jsx("span",{className:"text-white text-sm italic group-hover/notes:text-slate-100 transition-colors duration-200",children:t.notes})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-700/50 group-hover:border-emerald-400/30 transition-colors duration-300",children:[e.jsxs("button",{onClick:()=>s(t),className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-blue-500/80 to-indigo-600/80 hover:from-blue-500 hover:to-indigo-600 text-white rounded-xl transition-all duration-300 text-sm font-medium inline-flex items-center justify-center shadow-lg hover:shadow-blue-500/25 hover:scale-105 hover:-translate-y-0.5 group/edit",title:n("portfolio.documents.card.editTitle"),children:[e.jsx(l,{icon:"mdi:pencil",className:"w-4 h-4 mr-2 group-hover/edit:scale-110 transition-transform duration-200"}),e.jsx("span",{className:"group-hover/edit:tracking-wide transition-all duration-200",children:n("portfolio.documents.card.editButton")})]}),e.jsx("button",{onClick:()=>c(t),className:"px-4 py-2.5 bg-gradient-to-r from-red-500/80 to-rose-600/80 hover:from-red-500 hover:to-rose-600 text-white rounded-xl transition-all duration-300 text-sm font-medium inline-flex items-center justify-center shadow-lg hover:shadow-red-500/25 hover:scale-105 hover:-translate-y-0.5 group/delete animate-none hover:animate-pulse",title:n("portfolio.documents.card.deleteTitle"),onMouseEnter:o=>{o.currentTarget.style.animation="shake 0.5s ease-in-out infinite"},onMouseLeave:o=>{o.currentTarget.style.animation="none"},children:e.jsx(l,{icon:"mdi:delete",className:"w-4 h-4 group-hover/delete:scale-125 group-hover/delete:rotate-12 transition-all duration-200"})})]})]})}function Y(){const[t,r]=p.useState(null),s=p.useCallback((g,i)=>{r({type:g,item:i,isOpen:!0})},[]),c=p.useCallback(()=>{r(null)},[]),n=p.useCallback(g=>{s("deleteVaccine",g)},[s]),m=p.useCallback(g=>{s("completeVaccine",g)},[s]),a=p.useCallback(g=>{s("deleteWeight",g)},[s]),d=p.useCallback(g=>{s("deleteMedication",g)},[s]),o=p.useCallback(g=>{s("completeMedication",g)},[s]),h=p.useCallback(g=>{s("deleteDeworming",g)},[s]),v=p.useCallback(g=>{s("completeDeworming",g)},[s]),x=p.useCallback(g=>{s("deleteMedicalReview",g)},[s]),j=p.useCallback(g=>{s("deleteDocumentFile",g)},[s]),D=p.useCallback(g=>{s("deleteSelectedFile",g)},[s]),w=p.useCallback(g=>{s("deleteDocument",g)},[s]);return{activeModal:t,closeModal:c,openDeleteVaccineModal:n,openCompleteVaccineModal:m,openDeleteWeightModal:a,openDeleteMedicationModal:d,openCompleteMedicationModal:o,openDeleteDewormingModal:h,openCompleteDewormingModal:v,openDeleteMedicalReviewModal:x,openDeleteDocumentFileModal:j,openDeleteSelectedFileModal:D,openDeleteDocumentModal:w}}const I=(t,r="en")=>{if(!t||t.trim()==="")return r==="en"?"Date not specified":"Fecha no especificada";const s=new Date(t);if(isNaN(s.getTime()))return r==="en"?"Invalid date":"Fecha inválida";const c=r==="en"?"en-US":"es-ES";return s.toLocaleDateString(c,{year:"numeric",month:"long",day:"numeric"})},St=(t,r)=>{if(!r)switch(t){case"small":return"Pequeño";case"medium":return"Mediano";case"large":return"Grande";case"extra_large":return"Extra Grande";default:return t}switch(t){case"small":return r("pets.small");case"medium":return r("pets.medium");case"large":return r("pets.large");case"extra_large":return r("pets.large");default:return t}},Tt=t=>{switch(t){case"pending":return"border-yellow-500/50 bg-yellow-900/10";case"overdue":return"border-red-500/50 bg-red-900/10";case"completed":default:return"border-green-500/50 bg-green-900/10"}},Ft=t=>{switch(t){case"pending":return{text:"⏳ Pendiente",className:"px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-xs font-bold border border-yellow-500/30"};case"overdue":return{text:"⚠️ Vencida",className:"px-3 py-1 bg-red-500/20 text-red-400 rounded-full text-xs font-bold border border-red-500/30"};case"completed":default:return{text:"✅ Aplicada",className:"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-bold border border-green-500/30"}}},L=t=>{switch(t){case"dog":return"🐕";case"cat":return"🐱";case"bird":return"🦅";case"rabbit":return"🐰";case"hamster":return"🐹";case"fish":return"🐠";default:return"🐕"}},Mt=()=>{try{const t=localStorage.getItem("user");if(t){const r=JSON.parse(t);return r.name||r.username||"Usuario"}}catch(t){console.log("Error parsing user data:",t)}return"Usuario"},K=async(t,r,s,c)=>{try{const n=Mt();(await fetch(`/api/pets/${t}/weight`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({weight_kg:r,measurement_date:s,notes:c,added_by_user:n})})).ok||console.log("Warning: No se pudo guardar el registro de peso")}catch(n){console.log("Error al guardar registro de peso:",n)}},_=(t,r,s,c)=>{try{return typeof t=="function"&&t(r,c)||s}catch(n){return console.warn(`Translation failed for key: ${r}`,n),s}},T=(t,r)=>{if(!t||typeof t!="string")return t;try{return t.replace(/\{(\w+)\}/g,(s,c)=>r[c]!==void 0?String(r[c]):s)}catch(s){return console.warn("Interpolation failed:",s),t}},Z=(t,r,s)=>{if(!t)return null;switch(t.type){case"deleteVaccine":return{title:_(s,"confirmationModal.deleteVaccine.title","Eliminar Vacuna"),message:T(_(s,"confirmationModal.deleteVaccine.message",'¿Estás seguro de que quieres eliminar la vacuna "{name}"? Esta acción no se puede deshacer.'),{name:t.item?.vaccine_name}),confirmText:_(s,"confirmationModal.deleteVaccine.confirmText","Eliminar"),confirmColor:"bg-red-600 hover:bg-red-500 focus:ring-red-400",icon:"mdi:delete",onConfirm:r.confirmDeleteVaccine};case"completeVaccine":return{title:_(s,"confirmationModal.completeVaccine.title","Completar Vacuna"),message:T(_(s,"confirmationModal.completeVaccine.message",'¿Confirmas que la vacuna "{name}" ha sido aplicada y está completada?'),{name:t.item?.vaccine_name}),confirmText:_(s,"confirmationModal.completeVaccine.confirmText","Completar"),confirmColor:"bg-green-600 hover:bg-green-500 focus:ring-green-400",icon:"mdi:check",onConfirm:r.confirmCompleteVaccine};case"deleteWeight":return{title:_(s,"confirmationModal.deleteWeight.title","Eliminar Registro de Peso"),message:T(_(s,"confirmationModal.deleteWeight.message","¿Estás seguro de que quieres eliminar el registro de peso de {weight} kg del {date}? Esta acción no se puede deshacer."),{weight:t.item?.weight_kg,date:t.item?I(t.item.measurement_date):""}),confirmText:_(s,"confirmationModal.deleteWeight.confirmText","Eliminar"),confirmColor:"bg-red-600 hover:bg-red-500 focus:ring-red-400",icon:"mdi:scale",onConfirm:r.confirmDeleteWeight};case"deleteMedication":return{title:_(s,"confirmationModal.deleteMedication.title","Eliminar Medicamento"),message:T(_(s,"confirmationModal.deleteMedication.message",'¿Estás seguro de que quieres eliminar el medicamento "{name}"? Esta acción no se puede deshacer.'),{name:t.item?.medication_name}),confirmText:_(s,"confirmationModal.deleteMedication.confirmText","Eliminar"),confirmColor:"bg-red-600 hover:bg-red-500 focus:ring-red-400",icon:"mdi:pill",onConfirm:r.confirmDeleteMedication};case"completeMedication":return{title:_(s,"confirmationModal.completeMedication.title","Completar Medicamento"),message:T(_(s,"confirmationModal.completeMedication.message",'¿Confirmas que el tratamiento con "{name}" ha sido completado?'),{name:t.item?.medication_name}),confirmText:_(s,"confirmationModal.completeMedication.confirmText","Completar"),confirmColor:"bg-green-600 hover:bg-green-500 focus:ring-green-400",icon:"mdi:pill",onConfirm:r.confirmCompleteMedication};case"deleteDeworming":return{title:_(s,"confirmationModal.deleteDeworming.title","Eliminar Desparasitación"),message:T(_(s,"confirmationModal.deleteDeworming.message",'¿Estás seguro de que quieres eliminar la desparasitación "{name}"? Esta acción no se puede deshacer.'),{name:t.item?.product_name}),confirmText:_(s,"confirmationModal.deleteDeworming.confirmText","Eliminar"),confirmColor:"bg-red-600 hover:bg-red-500 focus:ring-red-400",icon:"mdi:bug",onConfirm:r.confirmDeleteDeworming};case"completeDeworming":return{title:_(s,"confirmationModal.completeDeworming.title","Aplicar Desparasitación"),message:T(_(s,"confirmationModal.completeDeworming.message",'¿Confirmas que la desparasitación "{name}" ha sido aplicada?'),{name:t.item?.product_name}),confirmText:_(s,"confirmationModal.completeDeworming.confirmText","Aplicar"),confirmColor:"bg-green-600 hover:bg-green-500 focus:ring-green-400",icon:"mdi:bug",onConfirm:r.confirmCompleteDeworming};case"deleteMedicalReview":return{title:_(s,"confirmationModal.deleteMedicalReview.title","Eliminar Revisión Médica"),message:T(_(s,"confirmationModal.deleteMedicalReview.message","¿Estás seguro de que quieres eliminar la revisión médica del {date}? Esta acción no se puede deshacer."),{date:t.item?I(t.item.visit_date):""}),confirmText:_(s,"confirmationModal.deleteMedicalReview.confirmText","Eliminar"),confirmColor:"bg-red-600 hover:bg-red-500 focus:ring-red-400",icon:"mdi:delete",onConfirm:r.confirmDeleteMedicalReview};case"deleteDocumentFile":return{title:_(s,"confirmationModal.deleteDocumentFile.title","Eliminar Archivo"),message:T(_(s,"confirmationModal.deleteDocumentFile.message",'¿Estás seguro de que quieres eliminar el archivo "{name}"? Esta acción no se puede deshacer y el archivo se eliminará permanentemente.'),{name:t.item?.file_name||t.item?.original_name}),confirmText:_(s,"confirmationModal.deleteDocumentFile.confirmText","Eliminar"),confirmColor:"bg-red-600 hover:bg-red-500 focus:ring-red-400",icon:"mdi:file-remove",onConfirm:r.confirmDeleteDocumentFile};case"deleteSelectedFile":return{title:_(s,"confirmationModal.deleteSelectedFile.title","Eliminar Archivo Seleccionado"),message:T(_(s,"confirmationModal.deleteSelectedFile.message",'¿Estás seguro de que quieres quitar "{name}" de la lista? Tendrás que seleccionarlo nuevamente si cambias de opinión.'),{name:t.item?.displayName||t.item?.file?.name}),confirmText:_(s,"confirmationModal.deleteSelectedFile.confirmText","Quitar"),confirmColor:"bg-red-600 hover:bg-red-500 focus:ring-red-400",icon:"mdi:file-cancel",onConfirm:r.confirmDeleteSelectedFile};case"deleteDocument":return{title:_(s,"confirmationModal.deleteDocument.title","Eliminar Documento"),message:T(_(s,"confirmationModal.deleteDocument.message",'¿Estás seguro de que quieres eliminar el documento "{name}"? Esta acción eliminará permanentemente el documento y todos sus archivos asociados.'),{name:t.item?.document_name}),confirmText:_(s,"confirmationModal.deleteDocument.confirmText","Eliminar"),confirmColor:"bg-red-600 hover:bg-red-500 focus:ring-red-400",icon:"mdi:file-remove",onConfirm:r.confirmDeleteDocument};default:return null}},z=t=>{switch(t.split(".").pop()?.toLowerCase()){case"pdf":return{icon:"mdi:file-pdf-box",color:"text-red-400"};case"doc":case"docx":return{icon:"mdi:file-word-box",color:"text-blue-500"};case"jpg":case"jpeg":case"png":case"gif":case"webp":return{icon:"mdi:file-image-box",color:"text-green-400"};case"txt":return{icon:"mdi:file-document-box",color:"text-slate-400"};case"zip":case"rar":return{icon:"mdi:file-compress",color:"text-yellow-400"};default:return{icon:"mdi:file-box",color:"text-slate-400"}}};function Wt({formData:t,isEditing:r,isSaving:s,onFormChange:c,onSave:n,onCancel:m}){const{t:a}=E(),{activeModal:d,closeModal:o,openDeleteDocumentFileModal:h,openDeleteSelectedFileModal:v}=Y(),x=(i,u)=>{c({...t,[i]:u})},w=Z(d,{confirmDeleteVaccine:()=>{},confirmCompleteVaccine:()=>{},confirmDeleteWeight:()=>{},confirmDeleteMedication:()=>{},confirmCompleteMedication:()=>{},confirmDeleteDeworming:()=>{},confirmCompleteDeworming:()=>{},confirmDeleteMedicalReview:()=>{},confirmDeleteDocumentFile:()=>{if(d&&d.item){const i=d.item,u=t.existingFiles?.findIndex(b=>b.id===i.id)??-1;if(u>=0){const b=[...t.filesToDelete||[]];i.id&&!b.includes(i.id)&&b.push(i.id);const f=t.existingFiles?.filter((k,N)=>N!==u)||[];c({...t,existingFiles:f,filesToDelete:b})}}o()},confirmDeleteSelectedFile:()=>{if(d&&d.item){const i=d.item.index,u=t.filesWithNames?.filter((b,f)=>f!==i)||[];c({...t,filesWithNames:u})}o()}},a),g=i=>{i.preventDefault(),n()};return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:g,className:"mb-8 p-8 bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-sm rounded-2xl border border-slate-700/50 shadow-2xl hover:shadow-teal-500/10 transition-all duration-500",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8 pb-6 border-b border-slate-700/50",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-teal-500/20 to-cyan-600/20 rounded-xl border border-teal-500/30",children:e.jsx(l,{icon:"mdi:file-document-multiple",className:"w-8 h-8 text-teal-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-white mb-1",children:a(r?"portfolio.documents.form.editTitle":"portfolio.documents.form.newTitle")}),e.jsx("p",{className:"text-slate-400 text-sm",children:a(r?"portfolio.documents.form.editSubtitle":"portfolio.documents.form.newSubtitle")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:file-document",className:"w-4 h-4 text-teal-400"}),a("portfolio.documents.form.documentNameLabel")," ",t.filesWithNames&&t.filesWithNames.length>1?"*":""]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t.document_name,onChange:i=>x("document_name",i.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-teal-400/50 focus:border-teal-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70",placeholder:t.filesWithNames&&t.filesWithNames.length>1?a("portfolio.documents.form.documentNamePlaceholder"):a("portfolio.documents.form.singleFileDocumentPlaceholder")}),e.jsx(l,{icon:"mdi:tag",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]}),t.filesWithNames&&t.filesWithNames.length>1&&e.jsxs("p",{className:"mt-2 text-xs text-slate-400",children:[e.jsx(l,{icon:"mdi:information",className:"inline w-3 h-3 mr-1"}),a("portfolio.documents.form.multipleFilesInfo",{count:t.filesWithNames.length})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:format-list-bulleted-type",className:"w-4 h-4 text-teal-400"}),a("portfolio.documents.form.documentTypeLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:t.document_type,onChange:i=>x("document_type",i.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white focus:ring-2 focus:ring-teal-400/50 focus:border-teal-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70 appearance-none",children:[e.jsx("option",{value:"certificate",children:a("portfolio.documents.form.certificateOption")}),e.jsx("option",{value:"medical",children:a("portfolio.documents.form.medicalOption")}),e.jsx("option",{value:"insurance",children:a("portfolio.documents.form.insuranceOption")}),e.jsx("option",{value:"identification",children:a("portfolio.documents.form.identificationOption")}),e.jsx("option",{value:"other",children:a("portfolio.documents.form.otherOption")})]}),e.jsx(l,{icon:"mdi:chevron-down",className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),e.jsx(l,{icon:"mdi:file-chart",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"tabler:upload",className:"w-4 h-4 text-teal-400"}),a("portfolio.documents.form.uploadDateLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:t.upload_date,onChange:i=>x("upload_date",i.target.value),required:!0,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white focus:ring-2 focus:ring-teal-400/50 focus:border-teal-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70"}),e.jsx(l,{icon:"mdi:calendar-today",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:file-upload",className:"w-4 h-4 text-teal-400"}),a("portfolio.documents.form.fileLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",multiple:!0,onChange:i=>{const u=i.target.files;if(u&&u.length>0){const b=Array.from(u),f=t.filesWithNames||[],k=b.map(C=>({file:C,displayName:C.name.replace(/\.[^/.]+$/,"")})),N=[...f,...k];c({...t,filesWithNames:N})}else c({...t,filesWithNames:[]})},className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-teal-500/20 file:text-teal-400 hover:file:bg-teal-500/30 focus:ring-2 focus:ring-teal-400/50 focus:border-teal-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70"}),e.jsx(l,{icon:"mdi:paperclip",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]})]}),t.filesWithNames&&t.filesWithNames.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"text-base font-medium text-slate-300 mb-4 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:file-plus-box",className:"w-5 h-5 text-teal-400"}),a("portfolio.documents.form.filesSelected")," (",t.filesWithNames.length,")"]}),e.jsxs("div",{className:"bg-teal-500/5 rounded-xl border border-teal-500/20 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-teal-500/10 border-b border-teal-500/20 text-sm font-medium text-slate-400",children:[e.jsx("div",{className:"flex-shrink-0 w-6"}),e.jsx("div",{className:"flex-1 min-w-0 max-w-sm",children:a("portfolio.documents.form.filesSelected")}),e.jsx("div",{className:"flex-1 min-w-0",children:a("portfolio.documents.form.fileNameLabel")}),e.jsx("div",{className:"flex-shrink-0 w-24 text-center",children:a("portfolio.documents.form.actionsLabel")})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:t.filesWithNames.map((i,u)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-teal-500/10 last:border-b-0 hover:bg-teal-500/10 transition-colors group",children:[e.jsx("div",{className:"flex-shrink-0",children:(()=>{const{icon:b,color:f}=z(i.file.name);return e.jsx(l,{icon:b,className:`w-6 h-6 ${f}`})})()}),e.jsxs("div",{className:"flex-1 min-w-0 max-w-sm",children:[e.jsx("p",{className:"text-sm text-slate-300 truncate font-medium",title:i.file.name,children:i.file.name}),e.jsxs("p",{className:"text-xs text-teal-500 mt-1",children:[(i.file.size/1024/1024).toFixed(1)," MB"]})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("input",{type:"text",value:i.displayName,onChange:b=>{const f=[...t.filesWithNames||[]];f[u]={...i,displayName:b.target.value},c({...t,filesWithNames:f})},className:"w-full px-4 py-3 text-sm bg-slate-700/50 border border-slate-600/50 rounded-lg text-teal-300 focus:ring-2 focus:ring-teal-400/50 focus:border-teal-400/50 transition-all placeholder-slate-500",placeholder:t.filesWithNames&&t.filesWithNames.length===1?a("portfolio.documents.form.documentNameLabel")+"...":a("portfolio.documents.form.fileNamePlaceholder")})}),e.jsx("div",{className:"flex items-center justify-center gap-2 flex-shrink-0 w-24",children:e.jsx("button",{type:"button",onClick:()=>v({displayName:i.displayName,file:i.file,index:u}),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors opacity-70 group-hover:opacity-100",title:a("portfolio.documents.form.deleteFileTitle"),children:e.jsx(l,{icon:"mdi:delete",className:"w-5 h-5"})})})]},`${i.file.name}-${u}`))})]})]}),r&&t.existingFiles&&t.existingFiles.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"text-base font-medium text-slate-300 mb-4 flex items-center gap-2",children:[e.jsx(l,{icon:"mdi:file-multiple",className:"w-5 h-5 text-blue-400"}),a("portfolio.documents.form.currentFiles")," (",t.existingFiles.length,")"]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-700/30 border-b border-slate-700/30 text-sm font-medium text-slate-400",children:[e.jsx("div",{className:"flex-shrink-0 w-6"}),e.jsx("div",{className:"flex-1 min-w-0 max-w-sm",children:a("portfolio.documents.form.originalFileLabel")}),e.jsx("div",{className:"flex-1 min-w-0",children:a("portfolio.documents.form.fileNameLabel")}),e.jsx("div",{className:"flex-shrink-0 w-24 text-center",children:a("portfolio.documents.form.actionsLabel")})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:t.existingFiles.map((i,u)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-slate-700/30 last:border-b-0 hover:bg-slate-700/20 transition-colors group",children:[e.jsx("div",{className:"flex-shrink-0",children:(()=>{const{icon:b,color:f}=z(i.original_name);return e.jsx(l,{icon:b,className:`w-6 h-6 ${f}`})})()}),e.jsxs("div",{className:"flex-1 min-w-0 max-w-sm",children:[e.jsx("p",{className:"text-sm text-slate-300 truncate font-medium",title:i.original_name,children:i.original_name}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:new Date(i.created_at).toLocaleDateString()})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("input",{type:"text",value:i.file_name,onChange:b=>{const f=[...t.existingFiles||[]],k={...i,file_name:b.target.value};f[u]=k;const N=[...t.filesUpdated||[]],C=N.findIndex(M=>M.id===i.id);C>=0?N[C]=k:N.push(k),c({...t,existingFiles:f,filesUpdated:N})},className:"w-full px-4 py-3 text-sm bg-slate-700/50 border border-slate-600/50 rounded-lg text-blue-300 focus:ring-2 focus:ring-blue-400/50 focus:border-blue-400/50 transition-all placeholder-slate-500",placeholder:a("portfolio.documents.form.fileNamePlaceholder")})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 flex-shrink-0 w-24",children:[e.jsx("button",{type:"button",onClick:()=>{const b=`/api/${i.file_path}`;window.open(b,"_blank")},className:"p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 rounded-lg transition-colors opacity-70 group-hover:opacity-100",title:a("portfolio.documents.form.viewFileTitle"),children:e.jsx(l,{icon:"mdi:eye",className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>h(i),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors opacity-70 group-hover:opacity-100",title:a("portfolio.documents.form.deleteFileTitle"),children:e.jsx(l,{icon:"mdi:delete",className:"w-5 h-5"})})]})]},`existing-${i.id}-${u}`))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:doctor",className:"w-4 h-4 text-teal-400"}),a("portfolio.documents.form.veterinarianLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t.veterinarian,onChange:i=>x("veterinarian",i.target.value),className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-teal-400/50 focus:border-teal-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70",placeholder:a("portfolio.documents.form.veterinarianPlaceholder")}),e.jsx(l,{icon:"mdi:hospital-building",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"md:col-span-2 group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:text-box",className:"w-4 h-4 text-teal-400"}),a("portfolio.documents.form.descriptionLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:t.description,onChange:i=>x("description",i.target.value),rows:3,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-teal-400/50 focus:border-teal-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70 resize-none",placeholder:a("portfolio.documents.form.descriptionPlaceholder")}),e.jsx(l,{icon:"mdi:text",className:"absolute left-4 top-4 w-4 h-4 text-slate-400"})]})]})]}),e.jsxs("div",{className:"mb-8 group",children:[e.jsxs("label",{className:"block text-slate-300 font-semibold mb-3 text-sm flex items-center gap-2 group-hover:text-slate-200 transition-colors",children:[e.jsx(l,{icon:"mdi:note-text",className:"w-4 h-4 text-teal-400"}),a("portfolio.documents.form.notesLabel")]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:t.notes,onChange:i=>x("notes",i.target.value),rows:4,className:"w-full px-4 py-3 pl-12 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder:text-slate-400 focus:ring-2 focus:ring-teal-400/50 focus:border-teal-400/50 focus:bg-slate-700/80 transition-all duration-300 hover:border-slate-500/70 resize-none",placeholder:a("portfolio.documents.form.notesPlaceholder")}),e.jsx(l,{icon:"mdi:pencil",className:"absolute left-4 top-4 w-4 h-4 text-slate-400"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-700/50",children:[e.jsx("button",{type:"submit",disabled:s,className:"flex-1 px-6 py-4 bg-gradient-to-r from-teal-500/90 to-cyan-600/90 hover:from-teal-500 hover:to-cyan-600 text-white font-semibold rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-teal-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 hover:scale-[1.02] hover:-translate-y-0.5 group/save",children:s?e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:"mdi:loading",className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:a(r?"portfolio.documents.form.updatingText":"portfolio.documents.form.savingText")})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:"mdi:content-save",className:"w-5 h-5 group-hover/save:scale-110 transition-transform"}),e.jsx("span",{className:"group-hover/save:tracking-wide transition-all",children:a(r?"portfolio.documents.form.updateButton":"portfolio.documents.form.saveButton")})]})}),e.jsxs("button",{type:"button",onClick:m,className:"px-6 py-4 bg-gradient-to-r from-slate-600/90 to-slate-700/90 hover:from-slate-600 hover:to-slate-700 text-white font-semibold rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl flex items-center gap-3 hover:scale-[1.02] hover:-translate-y-0.5 group/cancel",children:[e.jsx(l,{icon:"mdi:close",className:"w-5 h-5 group-hover/cancel:scale-110 transition-transform"}),e.jsx("span",{className:"group-hover/cancel:tracking-wide transition-all",children:a("portfolio.documents.form.cancelButton")})]})]})]}),d&&w&&e.jsx(Q,{isOpen:d.isOpen,onClose:o,onConfirm:w.onConfirm,title:w.title,message:w.message,confirmText:w.confirmText,confirmColor:w.confirmColor,icon:w.icon})]})}function R({count:t}){return t===0?null:e.jsx("span",{className:"ml-2 bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded-full text-xs font-bold border border-yellow-500/30",children:t})}function $t(t){const{t:r,locale:s}=E(),{activeTab:c,portfolio:n,getCurrentWeight:m,getPendingCount:a,getVaccineStatusBadge:d,getVaccineStatusColor:o,getSizeText:h}=t,{dog_info:v,vaccines:x,weight_history:j}=n||{dog_info:null,vaccines:[],weight_history:[]},D=n?.medications||[],w=n?.dewormings||[],g=n?.medical_reviews||[],i=N=>I(N,s),u=n?.documents||[],b=a(x,"vaccines"),f=a(D,"medications"),k=a(w,"dewormings");return c==="info"?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx(gt,{dog_info:v,formatDate:i}),e.jsx(ft,{dog_info:v,getSizeText:h,getCurrentWeight:m})]}):c==="medical_reviews"?e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 md:gap-0 mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[e.jsx(l,{icon:"mdi:stethoscope",className:"mr-4 w-8 h-8 text-blue-400"}),e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:r("portfolio.medicalReviews.title")})]}),e.jsx("button",{onClick:t.handleAddMedicalReview,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg hover:shadow-blue-500/25 transition-all transform hover:scale-105 hover:-translate-y-1 focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-slate-900 shadow-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(l,{icon:"mdi:plus",className:"mr-2 w-4 h-4"}),r("portfolio.medicalReviews.newButton")]})})]}),t.showMedicalReviewForm&&e.jsx(vt,{formData:t.medicalReviewForm,isEditing:!!t.editingMedicalReview,isSaving:t.savingMedicalReview,onFormChange:t.setMedicalReviewForm,onSave:t.handleSaveMedicalReview,onCancel:t.cancelMedicalReviewForm}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.sort((N,C)=>new Date(C.visit_date).getTime()-new Date(N.visit_date).getTime()).map(N=>e.jsx(bt,{review:N,formatDate:i,onEdit:t.handleEditMedicalReview,onDelete:t.handleDeleteMedicalReview},N.id)),g.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(l,{icon:"mdi:stethoscope",className:"text-6xl block mb-4 mx-auto text-slate-400"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-300 mb-2",children:r("portfolio.medicalReviews.noReviews")}),e.jsx("p",{className:"text-slate-400",children:r("portfolio.medicalReviews.addFirstReview")})]})]})]}):c==="vaccines"?e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 md:gap-0 mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[e.jsx(l,{icon:"mdi:medical-bag",className:"mr-4 w-8 h-8 text-green-400"}),e.jsx("span",{className:"bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent",children:r("portfolio.vaccines.title")}),e.jsx(R,{count:b})]}),e.jsx("button",{onClick:t.handleAddVaccine,className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white font-semibold rounded-xl hover:shadow-lg hover:shadow-green-500/25 transition-all transform hover:scale-105 hover:-translate-y-1 focus:ring-2 focus:ring-green-400 focus:ring-offset-2 focus:ring-offset-slate-900 shadow-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(l,{icon:"mdi:plus",className:"mr-2 w-4 h-4"}),r("portfolio.vaccines.newButton")]})})]}),t.showVaccineForm&&e.jsx(jt,{formData:t.vaccineForm,isEditing:!!t.editingVaccine,isSaving:t.savingVaccine,onFormChange:t.setVaccineForm,onSave:t.handleSaveVaccine,onCancel:t.cancelVaccineForm}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[x.sort((N,C)=>new Date(C.vaccine_date).getTime()-new Date(N.vaccine_date).getTime()).map(N=>e.jsx(wt,{vaccine:N,formatDate:i,getVaccineStatusBadge:d,getVaccineStatusColor:o,onEdit:t.handleEditVaccine,onDelete:t.handleDeleteVaccine,onComplete:t.handleMarkVaccineCompleted},N.id)),x.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(l,{icon:"mdi:medical-bag",className:"text-6xl block mb-4 mx-auto text-slate-400"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-300 mb-2",children:r("portfolio.vaccines.noVaccines")}),e.jsx("p",{className:"text-slate-400",children:r("portfolio.vaccines.addFirstVaccine")})]})]})]}):c==="medication"?e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 md:gap-0 mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[e.jsx(l,{icon:"mdi:pill",className:"mr-4 w-8 h-8 text-purple-400"}),e.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:r("portfolio.medications.title")}),e.jsx(R,{count:f})]}),e.jsx("button",{onClick:t.handleAddMedication,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-xl hover:shadow-lg hover:shadow-purple-500/25 transition-all transform hover:scale-105 hover:-translate-y-1 focus:ring-2 focus:ring-purple-400 focus:ring-offset-2 focus:ring-offset-slate-900 shadow-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(l,{icon:"mdi:plus",className:"mr-2 w-4 h-4"}),r("portfolio.medications.newButton")]})})]}),t.showMedicationForm&&e.jsx(yt,{formData:t.medicationForm,isEditing:!!t.editingMedication,isSaving:t.savingMedication,onFormChange:t.setMedicationForm,onSave:t.handleSaveMedication,onCancel:t.cancelMedicationForm}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[D.sort((N,C)=>new Date(C.start_date).getTime()-new Date(N.start_date).getTime()).map(N=>e.jsx(Nt,{medication:N,formatDate:i,onEdit:t.handleEditMedication,onDelete:t.handleDeleteMedication,onComplete:t.handleMarkMedicationCompleted},N.id)),D.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(l,{icon:"mdi:pill",className:"text-6xl block mb-4 mx-auto text-slate-400"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-300 mb-2",children:r("portfolio.medications.noMedications")}),e.jsx("p",{className:"text-slate-400",children:r("portfolio.medications.addFirstMedication")})]})]})]}):c==="deworming"?e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 md:gap-0 mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[e.jsx(l,{icon:"mdi:bug",className:"mr-4 w-8 h-8 text-orange-400"}),e.jsx("span",{className:"bg-gradient-to-r from-orange-400 to-red-400 bg-clip-text text-transparent",children:r("portfolio.dewormings.title")}),e.jsx(R,{count:k})]}),e.jsx("button",{onClick:()=>t.handleAddDeworming(m()),className:"px-6 py-3 bg-gradient-to-r from-orange-400 to-red-400 text-white font-semibold rounded-xl hover:shadow-lg hover:shadow-blue-500/25 transition-all transform hover:scale-105 hover:-translate-y-1 focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-slate-900 shadow-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(l,{icon:"mdi:plus",className:"mr-2 w-4 h-4"}),r("portfolio.dewormings.newButton")]})})]}),t.showDewormingForm&&e.jsx(kt,{formData:t.dewormingForm,isEditing:!!t.editingDeworming,isSaving:t.savingDeworming,onFormChange:t.setDewormingForm,onSave:t.handleSaveDeworming,onCancel:t.cancelDewormingForm}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[w.sort((N,C)=>new Date(C.treatment_date).getTime()-new Date(N.treatment_date).getTime()).map(N=>e.jsx(_t,{deworming:N,formatDate:i,onEdit:t.handleEditDeworming,onDelete:t.handleDeleteDeworming,onComplete:t.handleMarkDewormingCompleted},N.id)),w.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(l,{icon:"mdi:bug",className:"text-6xl block mb-4 mx-auto text-slate-400"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-300 mb-2",children:r("portfolio.dewormings.noDewormings")}),e.jsx("p",{className:"text-slate-400",children:r("portfolio.dewormings.addFirstDeworming")})]})]})]}):c==="weight"?e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 md:gap-0 mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[e.jsx(l,{icon:"mdi:scale",className:"mr-4 w-8 h-8 text-indigo-400"}),e.jsx("span",{className:"bg-gradient-to-r from-indigo-400 to-cyan-400 bg-clip-text text-transparent",children:r("portfolio.weight.title")})]}),e.jsx("button",{onClick:t.handleAddWeight,className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-cyan-600 text-white font-semibold rounded-xl hover:shadow-lg hover:shadow-indigo-500/25 transition-all transform hover:scale-105 hover:-translate-y-1 focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-slate-900 shadow-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(l,{icon:"mdi:plus",className:"mr-2 w-4 h-4"}),r("portfolio.weight.newButton")]})})]}),t.showWeightForm&&e.jsx(Dt,{formData:t.weightForm,isEditing:!!t.editingWeight,isSaving:t.savingWeight,onFormChange:t.setWeightForm,onSave:t.handleSaveWeight,onCancel:t.cancelWeightForm}),e.jsx(Ct,{weightHistory:j,currentWeight:m(),formatDate:i,onEdit:t.handleEditWeight,onDelete:t.handleDeleteWeight,getCurrentWeight:m})]}):c==="documents"?e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 md:gap-0 mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[e.jsx(l,{icon:"mdi:file-document-multiple",className:"mr-4 w-8 h-8 text-teal-400"}),e.jsx("span",{className:"bg-gradient-to-r from-teal-400 to-cyan-400 bg-clip-text text-transparent",children:r("portfolio.documents.title")})]}),e.jsx("button",{onClick:t.handleAddDocument,className:"px-6 py-3 bg-gradient-to-r from-teal-600 to-cyan-600 text-white font-semibold rounded-xl hover:shadow-lg hover:shadow-teal-500/25 transition-all transform hover:scale-105 hover:-translate-y-1 focus:ring-2 focus:ring-teal-400 focus:ring-offset-2 focus:ring-offset-slate-900 shadow-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(l,{icon:"mdi:plus",className:"mr-2 w-4 h-4"}),r("portfolio.documents.newButton")]})})]}),t.showDocumentsForm&&e.jsx(Wt,{formData:t.documentsForm,isEditing:!!t.editingDocument,isSaving:t.savingDocument,onFormChange:t.setDocumentsForm,onSave:t.handleSaveDocument,onCancel:t.cancelDocumentsForm}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.sort((N,C)=>new Date(C.upload_date).getTime()-new Date(N.upload_date).getTime()).map(N=>e.jsx(Et,{document:N,formatDate:i,onEdit:t.handleEditDocument,onDelete:t.handleDeleteDocument},N.id)),u.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(l,{icon:"mdi:file-document-multiple",className:"text-6xl block mb-4 mx-auto text-slate-400"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-300 mb-2",children:r("portfolio.documents.noDocuments")}),e.jsx("p",{className:"text-slate-400",children:r("portfolio.documents.addFirstDocument")})]})]})]}):null}function J(){const{t}=E();return e.jsx("div",{className:"min-h-screen bg-slate-900 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"text-6xl mb-6",children:"🐕"}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:t("no_pets.title","No existen animales añadidos")}),e.jsx("p",{className:"text-slate-300 mb-8 text-lg",children:t("no_pets.subtitle","Añade tu primera mascota para comenzar a gestionar su información médica y seguimiento.")}),e.jsxs("a",{href:"/pets",className:"inline-flex items-center gap-2 bg-gradient-to-r from-blue-600 to-purple-700 hover:from-blue-700 hover:to-purple-800 text-white px-8 py-4 rounded-xl font-semibold transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx(l,{icon:"mdi:plus-circle",className:"w-5 h-5"}),t("no_pets.add_button","Añadir ahora")]})]})})}function Rt({error:t}){return e.jsx("div",{className:"min-h-screen bg-slate-900 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"bg-red-900/20 border border-red-500/50 text-red-400 p-8 rounded-2xl text-center max-w-md",children:[e.jsx("div",{className:"text-6xl mb-4",children:e.jsx(l,{icon:"mdi:alert-circle"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Error"}),e.jsx("p",{children:t})]})})}function Vt(){return e.jsx("div",{className:"min-h-screen bg-slate-900 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"bg-slate-800 border border-slate-700 text-slate-300 p-8 rounded-2xl text-center max-w-md",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🐾"}),e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"No se encontró ninguna mascota"}),e.jsx("p",{className:"mb-6 text-slate-400",children:"Parece que aún no has agregado ninguna mascota a tu cuenta."}),e.jsx("a",{href:"/pets",className:"inline-block px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl",children:"Añadir nueva mascota"})]})})}function X({dog_info:t,availablePets:r,getCurrentPetId:s,showPetSelector:c,setShowPetSelector:n,onPetChange:m,variant:a}){const{t:d}=E(),o=a==="sidebar",h=a==="mobile",v=r.length>1&&e.jsxs("div",{className:`${o?"mt-4":"mt-6"} relative pet-selector-container ${o?"max-lg:hidden":""}`,children:[e.jsxs("button",{onClick:()=>n(!c),className:"w-full bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2",children:[e.jsx(l,{icon:"mdi:swap-horizontal",className:"w-7 h-7 mr-2"})," ",d("petHeader.changePet")]}),c&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-slate-800 border border-slate-700 rounded-xl shadow-2xl z-50",children:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-slate-300 text-xs font-medium px-3 py-2 border-b border-slate-700",children:d("petHeader.selectPet")}),r.map(x=>e.jsxs("button",{onClick:j=>{j.preventDefault(),j.stopPropagation(),m(x.id.toString())},className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-all hover:bg-slate-700 flex items-center gap-3 ${x.id.toString()===s()?"bg-blue-600 text-white":"text-slate-300"}`,children:[e.jsxs("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:[x.photo_url?e.jsx("img",{src:x.photo_url,alt:x.name,className:"w-full h-full object-cover",onError:j=>{j.currentTarget.style.display="none",j.currentTarget.nextElementSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-full h-full bg-slate-600 flex items-center justify-center text-lg ${x.photo_url?"hidden":"flex"}`,style:{display:x.photo_url?"none":"flex"},children:L(x.species)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.name}),e.jsx("div",{className:"text-xs opacity-75",children:x.breed})]})]},x.id))]})})]});return o?e.jsxs("div",{className:"mb-6 p-6 bg-gradient-dark rounded-2xl shadow-xl lg:mb-8 max-lg:order-1 max-lg:hidden",children:[e.jsxs("div",{className:"flex items-center gap-4 max-lg:justify-center",children:[e.jsxs("div",{className:"w-16 h-16 lg:w-20 lg:h-20 rounded-full shadow-lg overflow-hidden flex-shrink-0",children:[t?.photo_url?e.jsx("img",{src:t.photo_url,alt:t.name,className:"w-full h-full object-cover",onError:x=>{x.currentTarget.style.display="none",x.currentTarget.nextElementSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-full h-full bg-white/20 flex items-center justify-center text-3xl lg:text-4xl ${t?.photo_url?"hidden":"flex"}`,style:{display:t?.photo_url?"none":"flex"},children:L(t?.species)})]}),e.jsxs("div",{className:"text-white max-lg:hidden",children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:t?.name||d("petHeader.loading")}),e.jsx("p",{className:"text-sm opacity-90",children:t?.breed||d("petHeader.loading")}),e.jsxs("div",{className:"flex flex-col gap-1 mt-2",children:[e.jsxs("span",{className:"bg-white/20 px-3 py-1 rounded-full text-xs text-center font-medium",children:[t?.age_years||0," ",d("petHeader.yearsOld")]}),t?.species==="dog"&&e.jsxs("span",{className:"bg-white/10 px-3 py-1 rounded-full text-xs text-center font-medium",children:[t?.dog_years||0," ",d("petHeader.dogYears")]})]})]})]}),v]}):h?e.jsxs("header",{className:"mb-8 p-8 bg-gradient-dark rounded-3xl shadow-2xl lg:hidden",children:[e.jsxs("div",{className:"flex items-center gap-8 max-md:flex-col max-md:text-center",children:[e.jsxs("div",{className:"w-32 h-32 rounded-full shadow-lg overflow-hidden",children:[t?.photo_url?e.jsx("img",{src:t.photo_url,alt:t.name,className:"w-full h-full object-cover",onError:x=>{x.currentTarget.style.display="none",x.currentTarget.nextElementSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-full h-full bg-white/20 flex items-center justify-center text-6xl ${t?.photo_url?"hidden":"flex"}`,style:{display:t?.photo_url?"none":"flex"},children:L(t?.species)})]}),e.jsxs("div",{className:"flex-1 text-white",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:t?.name||d("petHeader.loading")}),e.jsx("p",{className:"text-xl opacity-90 mb-4",children:t?.breed||d("petHeader.loading")}),e.jsxs("div",{className:"flex gap-4 max-md:justify-center",children:[e.jsxs("span",{className:"bg-white/20 px-4 py-2 rounded-full text-sm font-medium",children:[t?.age_years||0," ",d("petHeader.yearsOld")]}),t?.species==="dog"&&e.jsxs("span",{className:"bg-white/10 px-4 py-2 rounded-full text-sm",children:[t?.dog_years||0," ",d("petHeader.dogYears")]})]})]})]}),v]}):null}function G({activeTab:t,setActiveTab:r,pendingVaccines:s,pendingMedications:c,pendingDewormings:n,variant:m,t:a}){const d=m==="sidebar",o="bg-slate-800 rounded-2xl border border-slate-700 p-2",h=d?`${o} max-lg:order-2 max-lg:hidden`:`${o} mb-8 lg:hidden`,v=[{id:"info",icon:"mdi:clipboard-text-outline",label:a("home.tabs.info"),count:0},{id:"medical_reviews",icon:"mdi:stethoscope",label:a("home.tabs.medicalReviews"),count:0},{id:"vaccines",icon:"mdi:needle",label:a("home.tabs.vaccines"),count:s},{id:"medication",icon:"mdi:pill",label:a("home.tabs.medication"),count:c},{id:"deworming",icon:"mdi:bug",label:a("home.tabs.deworming"),count:n},{id:"weight",icon:"mdi:scale-balance",label:a("home.tabs.weight"),count:0},{id:"documents",icon:"mdi:file-document-multiple",label:a("home.tabs.documents"),count:0}];return e.jsx("nav",{className:h,children:e.jsx("div",{className:"space-y-1",children:v.map(x=>e.jsxs("button",{className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 text-left flex items-center gap-3 ${t===x.id?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"text-slate-300 hover:text-white hover:bg-slate-700"}`,onClick:()=>r(x.id),children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:e.jsx(l,{icon:x.icon,className:"text-xl"})}),e.jsx("span",{className:"flex-1 min-w-0",children:x.label}),x.count>0&&e.jsx(R,{count:x.count})]},x.id))})})}class Lt{baseUrl="";async fetchWithErrorHandler(r,s){try{const c=await fetch(r,s),n=await c.json();return c.ok?{success:!0,data:n}:{success:!1,message:n.message||`Error: ${c.status}`}}catch(c){return{success:!1,message:c instanceof Error?c.message:"Error desconocido"}}}async getPetComplete(r){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/complete`)}async getAllPets(){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets`)}getCurrentUser(){try{const r=localStorage.getItem("user");if(r){const s=JSON.parse(r);return s.name||s.username||"Usuario"}}catch(r){console.log("Error parsing user data:",r)}return"Usuario"}async updateVaccine(r,s,c){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/vaccines/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})}async deleteVaccine(r,s){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/vaccines/${s}`,{method:"DELETE"})}async createVaccine(r,s){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/vaccines`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}async createWeight(r,s){const c=this.getCurrentUser();return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/weight`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,added_by_user:c})})}async updateWeight(r,s,c){const n=this.getCurrentUser();return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/weight/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...c,added_by_user:n})})}async deleteWeight(r,s){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/weight/${s}`,{method:"DELETE"})}async createMedicalReview(r,s){const c=this.getCurrentUser();return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/medical-reviews`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,created_by_user:c})})}async updateMedicalReview(r,s,c){const n=this.getCurrentUser();return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/medical-reviews/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...c,updated_by_user:n})})}async deleteMedicalReview(r,s){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/medical-reviews/${s}`,{method:"DELETE"})}async createMedication(r,s){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/medications`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}async updateMedication(r,s,c){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/medications/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})}async deleteMedication(r,s){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/medications/${s}`,{method:"DELETE"})}async completeMedication(r,s){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/medications/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"completed"})})}async createDeworming(r,s){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/dewormings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}async updateDeworming(r,s,c){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/dewormings/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})}async deleteDeworming(r,s){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/dewormings/${s}`,{method:"DELETE"})}async completeDeworming(r,s){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/dewormings/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"completed"})})}async addDocument(r){const s=r.pet_id;if(r.filesWithNames&&r.filesWithNames.length>0){const c=new FormData,n=r.filesWithNames.length;return r.filesWithNames.forEach((m,a)=>{c.append("files[]",m.file),c.append("file_names[]",m.displayName)}),Object.keys(r).forEach(m=>{m!=="filesWithNames"&&m!=="pet_id"&&m!=="file"&&c.append(m,r[m])}),c.append("multiple_files","true"),c.append("total_files",n.toString()),this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${s}/documents`,{method:"POST",body:c})}else if(r.file){const c=new FormData;return c.append("file",r.file),Object.keys(r).forEach(n=>{n!=="file"&&n!=="pet_id"&&c.append(n,r[n])}),this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${s}/documents`,{method:"POST",body:c})}else{const{pet_id:c,...n}=r;return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${s}/documents`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}}async updateDocument(r,s){const c=s.pet_id,{pet_id:n,...m}=s;return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${c}/documents/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})}async deleteDocument(r,s){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/documents/${s}`,{method:"DELETE"})}async renameDocumentFile(r,s,c,n){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/documents/${s}/files/${c}/rename`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newName:n})})}async deleteDocumentFile(r,s,c){return this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/documents/${s}/files/${c}`,{method:"DELETE"})}async addFilesToDocument(r,s,c){const n=new FormData;return c.forEach((m,a)=>{n.append("files[]",m.file),n.append("fileNames[]",m.displayName)}),this.fetchWithErrorHandler(`${this.baseUrl}/api/pets/${r}/documents/${s}/files`,{method:"POST",body:n})}}const S=new Lt;function It(){const[t,r]=p.useState(null),[s,c]=p.useState([]),[n,m]=p.useState(!0),[a,d]=p.useState(null),o=p.useCallback(()=>new URLSearchParams(window.location.search).get("pet")||localStorage.getItem("selectedPetId")||"1",[]),h=p.useCallback(async()=>{try{const w=await S.getAllPets();w.success&&w.data&&c(w.data)}catch(w){console.error("Error fetching available pets:",w)}},[]),v=p.useCallback(async()=>{try{m(!0),d(null);let w=o();const g=await S.getAllPets();if(!g.success||!g.data||g.data.length===0){console.log("No pets found in database"),d("no_pets"),m(!1);return}w&&w!=="1"?(g.data.find(b=>b.id.toString()===w)||(w=g.data.sort((f,k)=>new Date(f.created_at||0).getTime()-new Date(k.created_at||0).getTime())[0].id.toString()),localStorage.setItem("selectedPetId",w)):(w=g.data.sort((b,f)=>new Date(b.created_at||0).getTime()-new Date(f.created_at||0).getTime())[0].id.toString(),localStorage.setItem("selectedPetId",w));const i=await S.getPetComplete(w);i.success&&i.data?r(i.data):d("not_found")}catch(w){console.error("Error in fetchDogPortfolio:",w),d(w instanceof Error?w.message:"Error desconocido")}finally{m(!1)}},[o]),x=p.useCallback(w=>{localStorage.setItem("selectedPetId",w);const g=new URL(window.location.href);g.searchParams.set("pet",w),window.history.pushState({},"",g),v()},[v]),j=p.useCallback(()=>t?.weight_history&&t.weight_history.length>0?[...t.weight_history].sort((g,i)=>new Date(i.measurement_date).getTime()-new Date(g.measurement_date).getTime())[0].weight_kg:t?.dog_info?.weight_kg||0,[t]),D=p.useCallback((w,g)=>g==="vaccines"?w.filter(i=>(i.status||"pending")==="pending").length:g==="medications"||g==="dewormings"?w.filter(i=>(i.status||"pending")==="pending").length:0,[]);return p.useEffect(()=>{v(),h()},[v,h]),{portfolio:t,availablePets:s,loading:n,error:a,fetchDogPortfolio:v,fetchAvailablePets:h,selectPet:x,getCurrentPetId:o,getCurrentWeight:j,getPendingCount:D}}function Ut(t,r,s,c){const[n,m]=p.useState(!1),[a,d]=p.useState(null),[o,h]=p.useState({vaccine_name:"",vaccine_date:new Date().toISOString().split("T")[0],veterinarian:"",notes:"",status:"pending"}),[v,x]=p.useState(!1),j=p.useCallback(()=>{h({vaccine_name:"",vaccine_date:new Date().toISOString().split("T")[0],veterinarian:"",notes:"",status:"pending"}),d(null),m(!0)},[]),D=p.useCallback(i=>{const u=i.status||"pending";h({vaccine_name:i.vaccine_name,vaccine_date:i.vaccine_date,veterinarian:i.veterinarian||"",notes:i.notes||"",status:u}),d(i),m(!0)},[]),w=p.useCallback(async()=>{if(!o.vaccine_name||!o.vaccine_date){s("Nombre de vacuna y fecha son requeridos");return}try{x(!0);const i=t(),u=a?await S.updateVaccine(i,a.id,o):await S.createVaccine(i,o);u.success?(m(!1),d(null),c(),r("Vacuna guardada correctamente")):s(u.message||"Error al guardar vacuna")}catch(i){s(i instanceof Error?i.message:"Error al guardar vacuna")}finally{x(!1)}},[o,a,t,r,s,c]),g=p.useCallback(()=>{m(!1),d(null),h({vaccine_name:"",vaccine_date:new Date().toISOString().split("T")[0],veterinarian:"",notes:"",status:"pending"})},[]);return{showVaccineForm:n,editingVaccine:a,vaccineForm:o,savingVaccine:v,setVaccineForm:h,handleAddVaccine:j,handleEditVaccine:D,handleSaveVaccine:w,cancelVaccineForm:g}}function Pt(t,r,s,c){const[n,m]=p.useState(!1),[a,d]=p.useState(null),[o,h]=p.useState({medication_name:"",dosage:"",frequency_hours:"",start_date:new Date().toISOString().split("T")[0],end_date:"",veterinarian:"",notes:"",status:"pending"}),[v,x]=p.useState(!1),j=p.useCallback(()=>{h({medication_name:"",dosage:"",frequency_hours:"",start_date:new Date().toISOString().split("T")[0],end_date:"",veterinarian:"",notes:"",status:"pending"}),d(null),m(!0)},[]),D=p.useCallback(i=>{const u=i.status||"pending";h({medication_name:i.medication_name,dosage:i.dosage,frequency_hours:i.frequency_hours?.toString()||"",start_date:i.start_date,end_date:i.end_date||"",veterinarian:i.veterinarian||"",notes:i.notes||"",status:u}),d(i),m(!0)},[]),w=p.useCallback(async()=>{if(!o.medication_name||!o.dosage||!o.frequency_hours||!o.start_date){s("Nombre del medicamento, dosis, frecuencia y fecha de inicio son requeridos");return}try{x(!0);const i=t(),u={medication_name:o.medication_name,dosage:o.dosage,frequency_hours:parseInt(o.frequency_hours),start_date:o.start_date,end_date:o.end_date||null,veterinarian:o.veterinarian||null,notes:o.notes||null,status:o.status},b=a?await S.updateMedication(i,a.id,u):await S.createMedication(i,u);b.success?(m(!1),d(null),c(),r("Medicamento guardado correctamente")):s(b.message||"Error al guardar medicamento")}catch(i){s(i instanceof Error?i.message:"Error al guardar medicamento")}finally{x(!1)}},[o,a,t,r,s,c]),g=p.useCallback(()=>{m(!1),d(null),h({medication_name:"",dosage:"",frequency_hours:"",start_date:new Date().toISOString().split("T")[0],end_date:"",veterinarian:"",notes:"",status:"pending"})},[]);return{showMedicationForm:n,editingMedication:a,medicationForm:o,savingMedication:v,setMedicationForm:h,handleAddMedication:j,handleEditMedication:D,handleSaveMedication:w,cancelMedicationForm:g}}function Ot(t,r,s,c){const[n,m]=p.useState(!1),[a,d]=p.useState(null),[o,h]=p.useState({product_name:"",treatment_date:new Date().toISOString().split("T")[0],next_treatment_date:"",weight_at_treatment:"",veterinarian:"",notes:"",status:"pending"}),[v,x]=p.useState(!1),j=p.useCallback(i=>{h({product_name:"",treatment_date:new Date().toISOString().split("T")[0],next_treatment_date:"",weight_at_treatment:i?.toString()||"",veterinarian:"",notes:"",status:"pending"}),d(null),m(!0)},[]),D=p.useCallback(i=>{const u=i.status||"pending";h({product_name:i.product_name,treatment_date:i.treatment_date,next_treatment_date:i.next_treatment_date||"",weight_at_treatment:i.weight_at_treatment?.toString()||"",veterinarian:i.veterinarian||"",notes:i.notes||"",status:u}),d(i),m(!0)},[]),w=p.useCallback(async()=>{if(!o.product_name||!o.treatment_date){s("Producto y fecha de tratamiento son requeridos");return}try{x(!0);const i=t(),u={product_name:o.product_name,treatment_date:o.treatment_date,next_treatment_date:o.next_treatment_date||null,weight_at_treatment:o.weight_at_treatment?parseFloat(o.weight_at_treatment):null,veterinarian:o.veterinarian||null,notes:o.notes||null,status:o.status},b=a?await S.updateDeworming(i,a.id,u):await S.createDeworming(i,u);b.success?(o.weight_at_treatment&&!isNaN(parseFloat(o.weight_at_treatment))&&o.status==="completed"&&await K(i,parseFloat(o.weight_at_treatment),o.treatment_date,`Peso registrado durante desparasitación con ${o.product_name}`),m(!1),d(null),c(),r("Desparasitación guardada correctamente")):s(b.message||"Error al guardar desparasitación")}catch(i){s(i instanceof Error?i.message:"Error al guardar desparasitación")}finally{x(!1)}},[o,a,t,r,s,c]),g=p.useCallback(()=>{m(!1),d(null),h({product_name:"",treatment_date:new Date().toISOString().split("T")[0],next_treatment_date:"",weight_at_treatment:"",veterinarian:"",notes:"",status:"pending"})},[]);return{showDewormingForm:n,editingDeworming:a,dewormingForm:o,savingDeworming:v,setDewormingForm:h,handleAddDeworming:j,handleEditDeworming:D,handleSaveDeworming:w,cancelDewormingForm:g}}function qt(t,r,s,c){const[n,m]=p.useState(!1),[a,d]=p.useState(null),[o,h]=p.useState({visit_date:new Date().toISOString().split("T")[0],visit_type:"routine",veterinarian:"",clinic_name:"",reason:"",diagnosis:"",treatment:"",next_visit:"",cost:"",notes:"",documents:[]}),[v,x]=p.useState(!1),j=p.useCallback(()=>{h({visit_date:new Date().toISOString().split("T")[0],visit_type:"routine",veterinarian:"",clinic_name:"",reason:"",diagnosis:"",treatment:"",next_visit:"",cost:"",notes:"",documents:[]}),d(null),m(!0)},[]),D=p.useCallback(i=>{h({visit_date:i.visit_date,visit_type:i.visit_type,veterinarian:i.veterinarian||"",clinic_name:i.clinic_name||"",reason:i.reason||"",diagnosis:i.diagnosis||"",treatment:i.treatment||"",next_visit:i.next_visit||"",cost:i.cost?i.cost.toString():"",notes:i.notes||"",documents:[]}),d(i),m(!0)},[]),w=p.useCallback(async()=>{if(!o.visit_date){s("Fecha de visita es requerida");return}try{x(!0);const i=t(),u={visit_date:o.visit_date,visit_type:o.visit_type,veterinarian:o.veterinarian,clinic_name:o.clinic_name,reason:o.reason,cost:o.cost?parseFloat(o.cost):null,diagnosis:o.diagnosis,treatment:o.treatment,next_visit:o.next_visit,notes:o.notes},b=a?await S.updateMedicalReview(i,a.id,u):await S.createMedicalReview(i,u);b.success?(m(!1),d(null),c(),r("Revisión médica guardada correctamente")):s(b.message||"Error al guardar revisión médica")}catch(i){s(i instanceof Error?i.message:"Error al guardar revisión médica")}finally{x(!1)}},[o,a,t,r,s,c]),g=p.useCallback(()=>{m(!1),d(null),h({visit_date:new Date().toISOString().split("T")[0],visit_type:"routine",veterinarian:"",clinic_name:"",reason:"",diagnosis:"",treatment:"",next_visit:"",cost:"",notes:"",documents:[]})},[]);return{showMedicalReviewForm:n,editingMedicalReview:a,medicalReviewForm:o,savingMedicalReview:v,setMedicalReviewForm:h,handleAddMedicalReview:j,handleEditMedicalReview:D,handleSaveMedicalReview:w,cancelMedicalReviewForm:g}}function Bt(t,r,s,c){const[n,m]=p.useState(!1),[a,d]=p.useState(null),[o,h]=p.useState({weight_kg:"",measurement_date:new Date().toISOString().split("T")[0],notes:""}),[v,x]=p.useState(!1),j=p.useCallback(()=>{h({weight_kg:"",measurement_date:new Date().toISOString().split("T")[0],notes:""}),d(null),m(!0)},[]),D=p.useCallback(i=>{h({weight_kg:i.weight_kg.toString(),measurement_date:i.measurement_date,notes:i.notes||""}),d(i),m(!0)},[]),w=p.useCallback(async()=>{if(!o.weight_kg||!o.measurement_date){s("Peso y fecha son requeridos");return}try{x(!0);const i=t(),u={weight_kg:parseFloat(o.weight_kg),measurement_date:o.measurement_date,notes:o.notes||null},b=a?await S.updateWeight(i,a.id,u):await S.createWeight(i,u);b.success?(m(!1),d(null),c(),r("Peso guardado correctamente")):s(b.message||"Error al guardar peso")}catch(i){s(i instanceof Error?i.message:"Error al guardar peso")}finally{x(!1)}},[o,a,t,r,s,c]),g=p.useCallback(()=>{m(!1),d(null),h({weight_kg:"",measurement_date:new Date().toISOString().split("T")[0],notes:""})},[]);return{showWeightForm:n,editingWeight:a,weightForm:o,savingWeight:v,setWeightForm:h,handleAddWeight:j,handleEditWeight:D,handleSaveWeight:w,cancelWeightForm:g}}function Ht(t,r,s,c){const[n,m]=p.useState(!1),[a,d]=p.useState(null),[o,h]=p.useState({document_name:"",document_type:"certificate",upload_date:new Date().toISOString().split("T")[0],file_path:"",description:"",veterinarian:"",notes:"",files:[],filesWithNames:[],existingFiles:[],filesToDelete:[],filesUpdated:[]}),[v,x]=p.useState(!1),j=p.useCallback(()=>{h({document_name:"",document_type:"certificate",upload_date:new Date().toISOString().split("T")[0],file_path:"",description:"",veterinarian:"",notes:"",files:[],filesWithNames:[],existingFiles:[],filesToDelete:[],filesUpdated:[]}),d(null),m(!0)},[]),D=p.useCallback(i=>{const u=i.files&&Array.isArray(i.files)?i.files:i.file_path?[{id:0,document_id:i.id,file_name:i.document_name||"Archivo",file_path:i.file_path,original_name:i.file_path.split("/").pop(),created_at:i.created_at||""}]:[];h({document_name:i.document_name||"",document_type:i.document_type||"certificate",upload_date:i.upload_date||new Date().toISOString().split("T")[0],file_path:i.file_path||"",description:i.description||"",veterinarian:i.veterinarian||"",notes:i.notes||"",files:[],filesWithNames:[],existingFiles:u,filesToDelete:[],filesUpdated:[]}),d(i),m(!0)},[]),w=p.useCallback(async()=>{if(!o.upload_date){s("Fecha de subida es requerida");return}const i=o.filesWithNames&&o.filesWithNames.length>0,u=o.existingFiles&&o.existingFiles.length>0;if(!i&&!u&&!a&&!o.document_name.trim()){s("Debe especificar un nombre para el documento");return}if(i){const b=o.filesWithNames.length;if(b===1){if(!o.filesWithNames[0].displayName.trim()&&!o.document_name.trim()){s("El archivo debe tener un nombre o debe especificar un nombre de documento");return}}else if(b>1){if(!o.document_name.trim()){s("Debe especificar un nombre para el documento que contendrá los archivos");return}if(o.filesWithNames.filter(k=>!k.displayName.trim()).length>0){s("Todos los archivos deben tener un nombre");return}}}if(!o.document_type){s("Debe seleccionar un tipo de documento");return}x(!0);try{const b=t();if(!b)throw new Error("No se pudo obtener el ID de la mascota");if(a){const f={document_name:o.document_name,document_type:o.document_type,upload_date:o.upload_date,description:o.description,veterinarian:o.veterinarian,notes:o.notes,pet_id:b},k=await S.updateDocument(a.id,f);if(!k.success)throw new Error(k.message||"Error al actualizar el documento");if(o.filesToDelete&&o.filesToDelete.length>0)for(const N of o.filesToDelete){const C=await S.deleteDocumentFile(b,a.id,N);C.success||console.error("Error al eliminar archivo:",C.message)}if(o.filesUpdated&&o.filesUpdated.length>0){for(const N of o.filesUpdated)if(N.id&&N.file_name){const C=await S.renameDocumentFile(b,a.id,N.id,N.file_name);C.success||console.error("Error al renombrar archivo:",C.message)}}if(i&&o.filesWithNames){const N=await S.addFilesToDocument(b,a.id,o.filesWithNames);if(!N.success){console.error("Error al añadir archivos:",N.message),s("Error al añadir archivos: "+N.message);return}}r("Documento actualizado correctamente")}else{const f=o.filesWithNames?.length||0;let k;f===0?k=o.document_name||"Documento sin adjuntos":f===1?k=o.filesWithNames[0].displayName.trim()||o.document_name||"Documento":k=o.document_name||"Documento múltiple";const N={...o,document_name:k,pet_id:b,filesWithNames:o.filesWithNames||[]},C=await S.addDocument(N);if(C.success){const M=f===0?"Documento creado correctamente":`Documento con ${f} archivo${f>1?"s":""} añadido correctamente`;r(M)}else throw new Error(C.message||"Error al añadir el documento")}m(!1),d(null),c()}catch(b){console.error("Error al guardar documento:",b),s(b instanceof Error?b.message:a?"Error al actualizar el documento":"Error al añadir el documento")}finally{x(!1)}},[o,a,t,r,s,c]),g=p.useCallback(()=>{m(!1),d(null),h({document_name:"",document_type:"certificate",upload_date:new Date().toISOString().split("T")[0],file_path:"",description:"",veterinarian:"",notes:"",files:[],filesWithNames:[],existingFiles:[],filesToDelete:[],filesUpdated:[]})},[]);return{showDocumentsForm:n,editingDocument:a,documentsForm:o,savingDocument:v,setDocumentsForm:h,handleAddDocument:j,handleEditDocument:D,handleSaveDocument:w,cancelDocumentsForm:g}}function At(t,r,s,c,n){const m=p.useCallback(async()=>{if(!n||n.type!=="deleteVaccine")return;const i=n.item;try{const u=t(),f=await(await fetch(`/api/pets/${u}/vaccines/${i.id}`,{method:"DELETE"})).json();f.success?(r(),s("Vacuna eliminada correctamente","success")):s(f.message||"Error al eliminar vacuna","error")}catch(u){s(u instanceof Error?u.message:"Error al eliminar vacuna","error")}finally{c()}},[n,t,r,s,c]),a=p.useCallback(async()=>{if(!n||n.type!=="completeVaccine")return;const i=n.item;try{const u=t(),f=await(await fetch(`/api/pets/${u}/vaccines/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({vaccine_name:i.vaccine_name,vaccine_date:i.vaccine_date,next_due_date:null,veterinarian:i.veterinarian,notes:i.notes,status:"completed"})})).json();f.success?(r(),s("Vacuna marcada como completada","success")):s(f.message||"Error al marcar vacuna como completada","error")}catch(u){s(u instanceof Error?u.message:"Error al marcar vacuna como completada","error")}finally{c()}},[n,t,r,s,c]),d=p.useCallback(async()=>{if(!n||n.type!=="deleteMedicalReview")return;const i=n.item;try{const u=t(),f=await(await fetch(`/api/pets/${u}/medical-reviews/${i.id}`,{method:"DELETE"})).json();f.success?(await r(),s("Revisión médica eliminada correctamente","success")):s(f.message||"Error al eliminar revisión médica","error")}catch(u){s(u instanceof Error?u.message:"Error al eliminar revisión médica","error")}finally{c()}},[n,t,r,s,c]),o=p.useCallback(async()=>{if(!n||n.type!=="deleteDeworming")return;const i=n.item;try{const u=t(),f=await(await fetch(`/api/pets/${u}/dewormings/${i.id}`,{method:"DELETE"})).json();f.success?(await r(),s("Desparasitación eliminada correctamente","success"),console.log("Desparasitación eliminada:",i.product_name)):s(f.message||"Error al eliminar desparasitación","error")}catch(u){s(u instanceof Error?u.message:"Error al eliminar desparasitación","error")}finally{c()}},[n,t,r,s,c]),h=p.useCallback(async()=>{if(!n||n.type!=="completeDeworming")return;const i=n.item;try{const u=t(),f=await(await fetch(`/api/pets/${u}/dewormings/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"completed"})})).json();if(f.success)i.weight_at_treatment&&!isNaN(parseFloat(i.weight_at_treatment))&&await K(u,parseFloat(i.weight_at_treatment),i.treatment_date,`Peso registrado al completar desparasitación con ${i.product_name}`),s("Desparasitación marcada como aplicada","success"),r();else throw new Error(f.message||"Error al actualizar desparasitación")}catch(u){s(u instanceof Error?u.message:"Error al marcar desparasitación como aplicada","error")}finally{c()}},[n,t,r,s,c]),v=p.useCallback(async()=>{if(!n||n.type!=="deleteWeight")return;const i=n.item;try{const u=t(),f=await(await fetch(`/api/pets/${u}/weight/${i.id}`,{method:"DELETE"})).json();f.success?(r(),s("Peso eliminado correctamente","success")):s(f.message||"Error al eliminar peso","error")}catch(u){s(u instanceof Error?u.message:"Error al eliminar peso","error")}finally{c()}},[n,t,r,s,c]),x=p.useCallback(async()=>{if(!n||n.type!=="deleteMedication")return;const i=n.item;try{const u=t(),f=await(await fetch(`/api/pets/${u}/medications/${i.id}`,{method:"DELETE"})).json();f.success?(await r(),s("Medicamento eliminado correctamente","success"),console.log("Medicamento eliminado:",i.medication_name)):s(f.message||"Error al eliminar medicamento","error")}catch(u){s(u instanceof Error?u.message:"Error al eliminar medicamento","error")}finally{c()}},[n,t,r,s,c]),j=p.useCallback(async()=>{if(!n||n.type!=="completeMedication")return;const i=n.item;try{const u=t(),f=await(await fetch(`/api/pets/${u}/medications/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"completed"})})).json();if(f.success)s("Medicamento marcado como completado","success"),r();else throw new Error(f.message||"Error al actualizar medicamento")}catch(u){s(u instanceof Error?u.message:"Error al marcar medicamento como completado","error")}finally{c()}},[n,t,r,s,c]),D=p.useCallback(async()=>{if(!n||n.type!=="deleteDocument")return;const i=n.item;try{const u=t(),f=await(await fetch(`/api/pets/${u}/documents/${i.id}`,{method:"DELETE"})).json();f.success?(r(),s("Documento eliminado correctamente","success")):s(f.message||"Error al eliminar documento","error")}catch(u){s(u instanceof Error?u.message:"Error al eliminar documento","error")}finally{c()}},[n,t,r,s,c]),w=p.useCallback(async()=>{!n||n.type!=="deleteDocumentFile"||c()},[n,c]),g=p.useCallback(async()=>{!n||n.type!=="deleteSelectedFile"||c()},[n,c]);return{confirmDeleteVaccine:m,confirmCompleteVaccine:a,confirmDeleteWeight:v,confirmDeleteMedication:x,confirmCompleteMedication:j,confirmDeleteDeworming:o,confirmCompleteDeworming:h,confirmDeleteMedicalReview:d,confirmDeleteDocument:D,confirmDeleteDocumentFile:w,confirmDeleteSelectedFile:g}}function zt(t){return{handleMarkVaccineCompleted:async v=>{t.openCompleteVaccineModal(v)},handleDeleteMedicalReview:async v=>{t.openDeleteMedicalReviewModal(v)},handleDeleteVaccine:async v=>{t.openDeleteVaccineModal(v)},handleDeleteDeworming:async v=>{t.openDeleteDewormingModal(v)},handleMarkDewormingCompleted:async v=>{t.openCompleteDewormingModal(v)},handleDeleteWeight:async v=>{t.openDeleteWeightModal(v)},handleDeleteMedication:async v=>{t.openDeleteMedicationModal(v)},handleMarkMedicationCompleted:async v=>{t.openCompleteMedicationModal(v)},handleDeleteDocument:async v=>{t.openDeleteDocumentModal(v)}}}function ts(){const{t}=E(),{toast:r,showToast:s,hideToast:c}=xt(),{activeModal:n,closeModal:m,openDeleteVaccineModal:a,openCompleteVaccineModal:d,openDeleteWeightModal:o,openDeleteMedicationModal:h,openCompleteMedicationModal:v,openDeleteDewormingModal:x,openCompleteDewormingModal:j,openDeleteMedicalReviewModal:D,openDeleteDocumentModal:w}=Y(),{portfolio:g,availablePets:i,loading:u,error:b,fetchDogPortfolio:f,getCurrentPetId:k,getCurrentWeight:N,getPendingCount:C,selectPet:M}=It(),[V,U]=p.useState("info"),[W,$]=p.useState(!1),{showVaccineForm:ee,editingVaccine:te,vaccineForm:se,savingVaccine:ae,setVaccineForm:oe,handleAddVaccine:re,handleEditVaccine:le,handleSaveVaccine:ie,cancelVaccineForm:ne}=Ut(k,y=>s(y,"success"),y=>s(y,"error"),f),{showMedicationForm:ce,editingMedication:de,medicationForm:me,savingMedication:ue,setMedicationForm:he,handleAddMedication:xe,handleEditMedication:pe,handleSaveMedication:ge,cancelMedicationForm:fe}=Pt(k,y=>s(y,"success"),y=>s(y,"error"),f),{showDewormingForm:be,editingDeworming:ve,dewormingForm:we,savingDeworming:je,setDewormingForm:Ne,handleAddDeworming:ye,handleEditDeworming:_e,handleSaveDeworming:ke,cancelDewormingForm:Ce}=Ot(k,y=>s(y,"success"),y=>s(y,"error"),f),{showMedicalReviewForm:De,editingMedicalReview:Ee,medicalReviewForm:Se,savingMedicalReview:Te,setMedicalReviewForm:Fe,handleAddMedicalReview:Me,handleEditMedicalReview:We,handleSaveMedicalReview:$e,cancelMedicalReviewForm:Re}=qt(k,y=>s(y,"success"),y=>s(y,"error"),f),{showWeightForm:Ve,editingWeight:Le,weightForm:Ie,savingWeight:Ue,setWeightForm:Pe,handleAddWeight:Oe,handleEditWeight:qe,handleSaveWeight:Be,cancelWeightForm:He}=Bt(k,y=>s(y,"success"),y=>s(y,"error"),f),{showDocumentsForm:Ae,editingDocument:ze,documentsForm:Je,savingDocument:Xe,setDocumentsForm:Ge,handleAddDocument:Qe,handleEditDocument:Ye,handleSaveDocument:Ke,cancelDocumentsForm:Ze}=Ht(k,y=>s(y,"success"),y=>s(y,"error"),f),et=At(k,f,s,m,n),P=zt({openDeleteVaccineModal:a,openCompleteVaccineModal:d,openDeleteWeightModal:o,openDeleteMedicationModal:h,openCompleteMedicationModal:v,openDeleteDewormingModal:x,openCompleteDewormingModal:j,openDeleteMedicalReviewModal:D,openDeleteDocumentModal:w});p.useEffect(()=>{const y=F=>{W&&(F.target.closest(".pet-selector-container")||$(!1))};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[W]);const O=y=>{console.log("CLICK DETECTADO - Cambiando a mascota ID:",y);try{$(!1),M(y)}catch(F){console.error("Error en handlePetChange:",F)}},tt=y=>{const F=Ft(y);return e.jsx("span",{className:F.className,children:F.text})},{handleMarkVaccineCompleted:st,handleDeleteMedicalReview:at,handleDeleteVaccine:ot,handleDeleteDeworming:rt,handleMarkDewormingCompleted:lt,handleDeleteWeight:it,handleDeleteMedication:nt,handleMarkMedicationCompleted:ct}=P,{dog_info:q,vaccines:dt,weight_history:Jt}=g||{dog_info:null,vaccines:[],weight_history:[]},mt=g?.medications||[],ut=g?.dewormings||[];g?.medical_reviews,g?.documents;const B=C(dt,"vaccines"),H=C(mt,"medications"),A=C(ut,"dewormings");return u?e.jsx(pt,{}):b==="no_pets"?e.jsx(J,{}):b==="not_found"?e.jsx(Vt,{}):b?e.jsx(Rt,{error:b}):g?e.jsx("div",{className:"min-h-screen bg-slate-900 p-6",children:e.jsxs("div",{className:"flex gap-8 max-lg:flex-col",children:[e.jsxs("aside",{className:"lg:w-64 lg:flex-shrink-0 max-lg:flex max-lg:flex-col",children:[e.jsx(X,{variant:"sidebar",dog_info:q,availablePets:i,getCurrentPetId:k,showPetSelector:W,setShowPetSelector:$,onPetChange:O}),e.jsx(G,{variant:"sidebar",activeTab:V,setActiveTab:U,pendingVaccines:B,pendingMedications:H,pendingDewormings:A,t})]}),e.jsxs("main",{className:"flex-1 min-w-0",children:[e.jsx(X,{variant:"mobile",dog_info:q,availablePets:i,getCurrentPetId:k,showPetSelector:W,setShowPetSelector:$,onPetChange:O}),e.jsx(G,{variant:"mobile",activeTab:V,setActiveTab:U,pendingVaccines:B,pendingMedications:H,pendingDewormings:A,t}),e.jsx($t,{activeTab:V,portfolio:g,getCurrentWeight:N,getPendingCount:C,getVaccineStatusBadge:tt,getVaccineStatusColor:Tt,getSizeText:St,showMedicalReviewForm:De,editingMedicalReview:Ee,medicalReviewForm:Se,savingMedicalReview:Te,setMedicalReviewForm:Fe,handleAddMedicalReview:Me,handleEditMedicalReview:We,handleSaveMedicalReview:$e,cancelMedicalReviewForm:Re,handleDeleteMedicalReview:at,showVaccineForm:ee,editingVaccine:te,vaccineForm:se,savingVaccine:ae,setVaccineForm:oe,handleAddVaccine:re,handleEditVaccine:le,handleSaveVaccine:ie,cancelVaccineForm:ne,handleMarkVaccineCompleted:st,handleDeleteVaccine:ot,showDewormingForm:be,editingDeworming:ve,dewormingForm:we,savingDeworming:je,setDewormingForm:Ne,handleAddDeworming:ye,handleEditDeworming:_e,handleSaveDeworming:ke,cancelDewormingForm:Ce,handleMarkDewormingCompleted:lt,handleDeleteDeworming:rt,showWeightForm:Ve,editingWeight:Le,weightForm:Ie,savingWeight:Ue,setWeightForm:Pe,handleAddWeight:Oe,handleEditWeight:qe,handleSaveWeight:Be,cancelWeightForm:He,handleDeleteWeight:it,showMedicationForm:ce,editingMedication:de,medicationForm:me,savingMedication:ue,setMedicationForm:he,handleAddMedication:xe,handleEditMedication:pe,handleSaveMedication:ge,cancelMedicationForm:fe,handleMarkMedicationCompleted:ct,handleDeleteMedication:nt,showDocumentsForm:Ae,editingDocument:ze,documentsForm:Je,savingDocument:Xe,setDocumentsForm:Ge,handleAddDocument:Qe,handleEditDocument:Ye,handleSaveDocument:Ke,cancelDocumentsForm:Ze,handleDeleteDocument:P.handleDeleteDocument}),n&&(()=>{const y=Z(n,et,t);return y?e.jsx(Q,{isOpen:n.isOpen,onClose:m,onConfirm:y.onConfirm,title:y.title,message:y.message,confirmText:y.confirmText,confirmColor:y.confirmColor,icon:y.icon}):null})(),r&&e.jsx(ht,{toast:r,onClose:c})]})]})}):e.jsx(J,{})}export{ts as default};
